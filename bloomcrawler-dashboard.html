<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• BLOOMCRAWLER RIIS - Ultimate Cyber Intelligence Platform</title>
    <meta name="description" content="Advanced cyber threat intelligence platform with undetectable crawling, AI forensics, and real-time analysis">
    <meta name="author" content="BLOOMCRAWLER RIIS">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

    <!-- Enhanced Military-Grade Dashboard with NPM Monitoring -->
    <script>
        // Global state for npm monitoring
        let npmProcess = null;
        let isNpmRunning = false;
        let logMessages = [];
        let systemMetrics = {
            threatsDetected: 0,
            dataPoints: 0,
            operationsRunning: 0,
            lastUpdate: new Date()
        };
        let activeContainers = [];
        let webhooks = [];
        let militaryLogs = [];
        let timeSeriesData = [];
        let alertQueue = [];

        // Initialize when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            initializeNpmMonitor();
            initializeWebSocketConnection();
            startSystemMetricsUpdates();
            loadSavedData();
        });

        function initializeDashboard() {
            console.log('üî• BLOOMCRAWLER RIIS Dashboard initializing...');
            addMilitaryLog('SYSTEM', 'Dashboard initialization started', 'info');
            updateTimeDisplays();
            setInterval(updateTimeDisplays, 1000);
        }

        function initializeNpmMonitor() {
            addMilitaryLog('NPM_MONITOR', 'NPM monitoring system initialized', 'info');
        }

        function initializeWebSocketConnection() {
            // Try to connect to the npm monitor server
            try {
                const socket = io('http://127.0.0.1:5001');
                socket.on('connect', function() {
                    addMilitaryLog('WEBSOCKET', 'Connected to NPM monitor server', 'success');
                    updateConnectionStatus('connected');
                });
                socket.on('disconnect', function() {
                    addMilitaryLog('WEBSOCKET', 'Disconnected from NPM monitor server', 'warning');
                    updateConnectionStatus('disconnected');
                });
                socket.on('npm-output', function(data) {
                    addNpmLog(data.message, data.level);
                    addMilitaryLog('NPM_OUTPUT', data.message.substring(0, 100), data.level);
                });
                socket.on('npm-status', function(data) {
                    updateNpmStatus(data.status);
                });
            } catch (error) {
                addMilitaryLog('WEBSOCKET', 'Failed to connect to monitor server: ' + error.message, 'error');
                updateConnectionStatus('error');
            }
        }

        function startSystemMetricsUpdates() {
            setInterval(() => {
                updateSystemMetrics();
                updateTimeSeriesData();
            }, 5000);
        }

        function loadSavedData() {
            // Load from localStorage
            const savedContainers = localStorage.getItem('bloomcrawler_containers');
            const savedWebhooks = localStorage.getItem('bloomcrawler_webhooks');
            const savedLogs = localStorage.getItem('bloomcrawler_logs');

            if (savedContainers) activeContainers = JSON.parse(savedContainers);
            if (savedWebhooks) webhooks = JSON.parse(savedWebhooks);
            if (savedLogs) militaryLogs = JSON.parse(savedLogs);

            updateContainersDisplay();
            updateWebhooksDisplay();
            updateLogsDisplay();
        }

        function updateTimeDisplays() {
            const now = new Date();
            const timeElements = document.querySelectorAll('.current-time');
            timeElements.forEach(el => {
                el.textContent = now.toLocaleTimeString();
            });

            const dateElements = document.querySelectorAll('.current-date');
            dateElements.forEach(el => {
                el.textContent = now.toLocaleDateString();
            });
        }

        function updateSystemMetrics() {
            systemMetrics.lastUpdate = new Date();
            systemMetrics.threatsDetected += Math.floor(Math.random() * 3);
            systemMetrics.dataPoints += Math.floor(Math.random() * 100);
            systemMetrics.operationsRunning = Math.floor(Math.random() * 10) + 1;

            document.getElementById('threats-detected').textContent = systemMetrics.threatsDetected;
            document.getElementById('data-points').textContent = systemMetrics.dataPoints.toLocaleString();
            document.getElementById('operations-running').textContent = systemMetrics.operationsRunning;
        }

        function updateTimeSeriesData() {
            timeSeriesData.push({
                timestamp: new Date(),
                threats: systemMetrics.threatsDetected,
                dataPoints: systemMetrics.dataPoints,
                operations: systemMetrics.operationsRunning
            });

            // Keep only last 100 data points
            if (timeSeriesData.length > 100) {
                timeSeriesData.shift();
            }

            updateCharts();
        }

        function updateCharts() {
            // Update time series charts with new data
            // This would integrate with Chart.js or similar library
            console.log('Updating charts with', timeSeriesData.length, 'data points');
        }

        function addNpmLog(message, level = 'info') {
            const logsContainer = document.getElementById('npm-logs');
            if (!logsContainer) return;

            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${level}`;
            logEntry.innerHTML = `
                <span class="log-timestamp">[${new Date().toLocaleTimeString()}]</span>
                <span class="log-level">${level.toUpperCase()}</span>
                <span class="log-message">${message}</span>
            `;

            logsContainer.appendChild(logEntry);
            logsContainer.scrollTop = logsContainer.scrollHeight;

            // Keep only last 200 log entries
            while (logsContainer.children.length > 200) {
                logsContainer.removeChild(logsContainer.firstChild);
            }
        }

        function addMilitaryLog(component, message, level = 'info') {
            const logEntry = {
                timestamp: new Date().toISOString(),
                component: component,
                message: message,
                level: level,
                id: Date.now()
            };

            militaryLogs.push(logEntry);

            // Keep only last 1000 military logs
            if (militaryLogs.length > 1000) {
                militaryLogs.shift();
            }

            updateLogsDisplay();
            saveLogsToStorage();

            // Check for alerts
            if (level === 'error' || level === 'warning') {
                addAlert(component, message, level);
            }
        }

        function addAlert(component, message, level) {
            const alert = {
                id: Date.now(),
                component: component,
                message: message,
                level: level,
                timestamp: new Date(),
                acknowledged: false
            };

            alertQueue.push(alert);
            updateAlertsDisplay();
        }

        function updateLogsDisplay() {
            const logsContainer = document.getElementById('military-logs');
            if (!logsContainer) return;

            logsContainer.innerHTML = '';
            militaryLogs.slice(-50).forEach(log => {
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry log-${log.level}`;
                logEntry.innerHTML = `
                    <span class="log-timestamp">[${new Date(log.timestamp).toLocaleString()}]</span>
                    <span class="log-component">${log.component}</span>
                    <span class="log-level">${log.level.toUpperCase()}</span>
                    <span class="log-message">${log.message}</span>
                `;
                logsContainer.appendChild(logEntry);
            });

            logsContainer.scrollTop = logsContainer.scrollHeight;
        }

        function updateAlertsDisplay() {
            const alertsContainer = document.getElementById('alerts-queue');
            if (!alertsContainer) return;

            const unackedAlerts = alertQueue.filter(a => !a.acknowledged);
            document.getElementById('alerts-count').textContent = unackedAlerts.length;

            alertsContainer.innerHTML = '';
            unackedAlerts.slice(-10).forEach(alert => {
                const alertEntry = document.createElement('div');
                alertEntry.className = `alert-item alert-${alert.level}`;
                alertEntry.innerHTML = `
                    <div class="alert-header">
                        <span class="alert-component">${alert.component}</span>
                        <span class="alert-time">${alert.timestamp.toLocaleTimeString()}</span>
                    </div>
                    <div class="alert-message">${alert.message}</div>
                    <div class="alert-actions">
                        <button onclick="acknowledgeAlert(${alert.id})" class="alert-ack-btn">‚úì Acknowledge</button>
                    </div>
                `;
                alertsContainer.appendChild(alertEntry);
            });
        }

        function acknowledgeAlert(alertId) {
            const alert = alertQueue.find(a => a.id === alertId);
            if (alert) {
                alert.acknowledged = true;
                updateAlertsDisplay();
            }
        }

        function updateNpmStatus(status) {
            const statusEl = document.getElementById('npm-status');
            if (statusEl) {
                statusEl.textContent = status;
                statusEl.className = `status-${status.toLowerCase().replace(' ', '-')}`;
            }
        }

        function updateConnectionStatus(status) {
            const statusEl = document.getElementById('connection-status');
            if (statusEl) {
                statusEl.textContent = status.toUpperCase();
                statusEl.className = `status-${status}`;
            }
        }

        function saveLogsToStorage() {
            localStorage.setItem('bloomcrawler_logs', JSON.stringify(militaryLogs));
        }

        function updateContainersDisplay() {
            document.getElementById('active-containers-count').textContent = activeContainers.length;
            // Update containers grid/list
        }

        function updateWebhooksDisplay() {
            document.getElementById('webhook-count-value').textContent = webhooks.length;
            // Update webhooks list
        }

        // NPM Control Functions
        async function startNpmProcess() {
            try {
                addMilitaryLog('NPM_CONTROL', 'Starting npm process...', 'info');
                const response = await fetch('/api/npm/start', { method: 'POST' });
                const result = await response.json();

                if (result.success) {
                    addMilitaryLog('NPM_CONTROL', 'NPM process started successfully', 'success');
                } else {
                    addMilitaryLog('NPM_CONTROL', 'Failed to start NPM: ' + result.error, 'error');
                }
            } catch (error) {
                addMilitaryLog('NPM_CONTROL', 'Error starting NPM: ' + error.message, 'error');
            }
        }

        async function stopNpmProcess() {
            try {
                addMilitaryLog('NPM_CONTROL', 'Stopping npm process...', 'info');
                const response = await fetch('/api/npm/stop', { method: 'POST' });
                const result = await response.json();

                if (result.success) {
                    addMilitaryLog('NPM_CONTROL', 'NPM process stopped successfully', 'success');
                } else {
                    addMilitaryLog('NPM_CONTROL', 'Failed to stop NPM', 'error');
                }
            } catch (error) {
                addMilitaryLog('NPM_CONTROL', 'Error stopping NPM: ' + error.message, 'error');
            }
        }

        function clearNpmLogs() {
            const logsContainer = document.getElementById('npm-logs');
            if (logsContainer) {
                logsContainer.innerHTML = '';
            }
            addMilitaryLog('NPM_CONTROL', 'NPM logs cleared by user', 'info');
        }

        // Container Management
        function createNewContainer() {
            const containerName = prompt('Enter container name:');
            if (containerName) {
                const container = {
                    id: Date.now(),
                    name: containerName,
                    type: 'custom',
                    created: new Date(),
                    status: 'active'
                };
                activeContainers.push(container);
                updateContainersDisplay();
                localStorage.setItem('bloomcrawler_containers', JSON.stringify(activeContainers));
                addMilitaryLog('CONTAINER', `New container created: ${containerName}`, 'info');
            }
        }

        // Webhook Management
        function createNewWebhook() {
            const webhookCreator = document.getElementById('webhook-creator');
            webhookCreator.style.display = webhookCreator.style.display === 'none' ? 'block' : 'none';
        }

        function saveNewWebhook() {
            const name = document.getElementById('webhook-name').value;
            const eventType = document.getElementById('webhook-event-type').value;
            const url = document.getElementById('webhook-url').value;
            const method = document.getElementById('webhook-method').value;

            if (name && url) {
                const webhook = {
                    id: Date.now(),
                    name: name,
                    eventType: eventType,
                    url: url,
                    method: method,
                    created: new Date(),
                    lastTriggered: null,
                    successCount: 0,
                    failureCount: 0
                };

                webhooks.push(webhook);
                updateWebhooksDisplay();
                localStorage.setItem('bloomcrawler_webhooks', JSON.stringify(webhooks));
                addMilitaryLog('WEBHOOK', `New webhook created: ${name}`, 'info');

                // Hide form
                document.getElementById('webhook-creator').style.display = 'none';
                // Clear form
                document.getElementById('webhook-name').value = '';
                document.getElementById('webhook-url').value = '';
            }
        }

        function testWebhook(webhookId) {
            addMilitaryLog('WEBHOOK', `Testing webhook ${webhookId}`, 'info');
            // Implement webhook testing
        }

        // Dialog Management
        function showDialog(dialogId) {
            const dialog = document.getElementById(dialogId);
            if (dialog) {
                dialog.style.display = 'block';
                addMilitaryLog('UI', `Dialog opened: ${dialogId}`, 'info');
            }
        }

        function hideDialog(dialogId) {
            const dialog = document.getElementById(dialogId);
            if (dialog) {
                dialog.style.display = 'none';
                addMilitaryLog('UI', `Dialog closed: ${dialogId}`, 'info');
            }
        }

        // Page Navigation
        function loadSubPage(pageName) {
            // Update navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Hide all container pages
            document.querySelectorAll('.container-page').forEach(page => {
                page.classList.remove('active');
            });

            // Show loading
            document.getElementById('container-loading').style.display = 'block';

            // Simulate loading delay
            setTimeout(() => {
                document.getElementById('container-loading').style.display = 'none';

                // Show the selected page
                const pageElement = document.getElementById(`${pageName}-page`);
                if (pageElement) {
                    pageElement.classList.add('active');
                } else {
                    // Create page if it doesn't exist
                    createPageContent(pageName);
                }

                addMilitaryLog('NAVIGATION', `Loaded page: ${pageName}`, 'info');
            }, 500);
        }

        function createPageContent(pageName) {
            const contentArea = document.getElementById('container-content-area');
            let pageContent = '';

            switch(pageName) {
                case 'dashboard':
                    pageContent = createDashboardPage();
                    break;
                case 'threat-detection':
                    pageContent = createThreatDetectionPage();
                    break;
                case 'crawler-control':
                    pageContent = createCrawlerControlPage();
                    break;
                case 'forensics':
                    pageContent = createForensicsPage();
                    break;
                case 'intelligence':
                    pageContent = createIntelligencePage();
                    break;
                case 'webhooks':
                    pageContent = createWebhooksPage();
                    break;
                case 'analytics':
                    pageContent = createAnalyticsPage();
                    break;
                case 'verification':
                    pageContent = createVerificationPage();
                    break;
                case 'settings':
                    pageContent = createSettingsPage();
                    break;
                default:
                    pageContent = '<h3>Page not found</h3><p>This page has not been implemented yet.</p>';
            }

            const pageDiv = document.createElement('div');
            pageDiv.id = `${pageName}-page`;
            pageDiv.className = 'container-page active';
            pageDiv.innerHTML = pageContent;
            contentArea.appendChild(pageDiv);
        }

        function createDashboardPage() {
            return `
                <div class="dashboard-overview">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">üè† System Dashboard</h3>

                    <!-- Quick Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="threats-detected">0</div>
                            <div class="stat-label">Threats Detected</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="data-points">0</div>
                            <div class="stat-label">Data Points</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="operations-running">0</div>
                            <div class="stat-label">Operations Running</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="active-containers-count">0</div>
                            <div class="stat-label">Active Containers</div>
                        </div>
                    </div>

                    <!-- System Status -->
                    <div class="system-status-panel" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">System Status</h4>
                        <div class="status-indicators">
                            <div class="status-item">
                                <span class="status-label">NPM Process:</span>
                                <span class="status-value" id="npm-status">Unknown</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">WebSocket:</span>
                                <span class="status-value" id="connection-status">CONNECTING</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Last Update:</span>
                                <span class="status-value current-time">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- NPM Control Panel -->
                    <div class="npm-control-panel" style="margin-top: 30px;">
                        <h4 style="color: var(--primary);">NPM Process Control</h4>
                        <div class="control-buttons">
                            <button onclick="startNpmProcess()" class="btn" style="background: var(--success);">
                                üöÄ Start BLOOMCRAWLER
                            </button>
                            <button onclick="stopNpmProcess()" class="btn" style="background: var(--danger);">
                                üõë Stop Process
                            </button>
                            <button onclick="clearNpmLogs()" class="btn" style="background: var(--warning);">
                                üßπ Clear Logs
                            </button>
                        </div>
                    </div>

                    <!-- NPM Output Logs -->
                    <div class="npm-logs-section" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">NPM Output Logs</h4>
                        <div id="npm-logs" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 300px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        "></div>
                    </div>
                </div>
            `;
        }

        function createThreatDetectionPage() {
            return `
                <div class="threat-detection-page">
                    <h3 style="color: var(--danger); margin-bottom: 20px;">üõ°Ô∏è Threat Detection & Analysis</h3>

                    <!-- Threat Statistics -->
                    <div class="threat-stats">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Active Threats</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Blocked IPs</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0%</div>
                                <div class="stat-label">Detection Rate</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">False Positives</div>
                            </div>
                        </div>
                    </div>

                    <!-- Threat Detection Controls -->
                    <div class="threat-controls" style="margin-top: 30px;">
                        <h4 style="color: var(--warning);">Detection Controls</h4>
                        <div class="control-buttons">
                            <button onclick="runThreatScan()" class="btn" style="background: var(--danger);">
                                üîç Run Full Scan
                            </button>
                            <button onclick="enableRealTime()" class="btn" style="background: var(--success);">
                                ‚ö° Enable Real-time
                            </button>
                            <button onclick="showThreatConfig()" class="btn" style="background: var(--secondary);">
                                ‚öôÔ∏è Configure Rules
                            </button>
                        </div>
                    </div>

                    <!-- Threat Log -->
                    <div class="threat-log" style="margin-top: 30px;">
                        <h4 style="color: var(--danger);">Threat Detection Log</h4>
                        <div id="threat-log" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 400px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        ">
                            <div class="log-entry log-info">[${new Date().toLocaleTimeString()}] Threat detection system initialized</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createCrawlerControlPage() {
            return `
                <div class="crawler-control-page">
                    <h3 style="color: var(--accent); margin-bottom: 20px;">üï∑Ô∏è Crawler Control Center</h3>

                    <!-- Crawler Status -->
                    <div class="crawler-status">
                        <div class="status-panel" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <h4 style="color: var(--accent);">Crawler Status</h4>
                            <div class="status-indicators">
                                <div class="status-item">
                                    <span class="status-label">Status:</span>
                                    <span class="status-value">IDLE</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Active Threads:</span>
                                    <span class="status-value">0</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">URLs Processed:</span>
                                    <span class="status-value">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Control Panel -->
                    <div class="crawler-controls">
                        <h4 style="color: var(--primary);">Crawler Controls</h4>
                        <div class="control-buttons">
                            <button onclick="startCrawler()" class="btn" style="background: var(--success);">
                                ‚ñ∂Ô∏è Start Crawling
                            </button>
                            <button onclick="pauseCrawler()" class="btn" style="background: var(--warning);">
                                ‚è∏Ô∏è Pause
                            </button>
                            <button onclick="stopCrawler()" class="btn" style="background: var(--danger);">
                                ‚èπÔ∏è Stop
                            </button>
                        </div>

                        <!-- Crawler Configuration -->
                        <div class="crawler-config" style="margin-top: 20px;">
                            <h5 style="color: var(--secondary);">Configuration</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div>
                                    <label style="color: #bdc3c7;">Max Depth:</label>
                                    <input type="number" value="3" style="width: 100%; padding: 5px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                                <div>
                                    <label style="color: #bdc3c7;">Delay (ms):</label>
                                    <input type="number" value="1000" style="width: 100%; padding: 5px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                                <div>
                                    <label style="color: #bdc3c7;">User Agent:</label>
                                    <select style="width: 100%; padding: 5px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                        <option>Chrome</option>
                                        <option>Firefox</option>
                                        <option>Safari</option>
                                        <option>Custom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Crawler Log -->
                    <div class="crawler-log" style="margin-top: 30px;">
                        <h4 style="color: var(--accent);">Crawler Activity Log</h4>
                        <div id="crawler-log" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 400px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        ">
                            <div class="log-entry log-info">[${new Date().toLocaleTimeString()}] Crawler control system ready</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createForensicsPage() {
            return `
                <div class="forensics-page">
                    <h3 style="color: var(--warning); margin-bottom: 20px;">ü§ñ AI Forensics Analysis</h3>

                    <!-- Forensics Stats -->
                    <div class="forensics-stats">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Files Analyzed</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Malware Detected</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0%</div>
                                <div class="stat-label">Analysis Complete</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Reports Generated</div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Controls -->
                    <div class="analysis-controls" style="margin-top: 30px;">
                        <h4 style="color: var(--warning);">Forensics Controls</h4>
                        <div class="control-buttons">
                            <button onclick="startForensicsScan()" class="btn" style="background: var(--warning);">
                                üî¨ Start Deep Scan
                            </button>
                            <button onclick="analyzeFile()" class="btn" style="background: var(--danger);">
                                üìÅ Analyze File
                            </button>
                            <button onclick="generateReport()" class="btn" style="background: var(--success);">
                                üìä Generate Report
                            </button>
                        </div>
                    </div>

                    <!-- AI Analysis Results -->
                    <div class="ai-analysis" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">AI Analysis Results</h4>
                        <div id="ai-analysis-results" class="results-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 300px;
                            overflow-y: auto;
                        ">
                            <div class="result-item">
                                <span class="result-timestamp">[${new Date().toLocaleTimeString()}]</span>
                                <span class="result-type">SYSTEM</span>
                                <span class="result-message">AI forensics engine ready for analysis</span>
                            </div>
                        </div>
                    </div>

                    <!-- Forensics Log -->
                    <div class="forensics-log" style="margin-top: 30px;">
                        <h4 style="color: var(--warning);">Forensics Activity Log</h4>
                        <div id="forensics-log" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 300px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        ">
                            <div class="log-entry log-info">[${new Date().toLocaleTimeString()}] Forensics system initialized</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createIntelligencePage() {
            return `
                <div class="intelligence-page">
                    <h3 style="color: var(--info-color); margin-bottom: 20px;">üéØ Intelligence Gathering</h3>

                    <!-- Intelligence Stats -->
                    <div class="intelligence-stats">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Sources Monitored</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Data Points</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0%</div>
                                <div class="stat-label">Relevance Score</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Alerts Generated</div>
                            </div>
                        </div>
                    </div>

                    <!-- Intelligence Controls -->
                    <div class="intelligence-controls" style="margin-top: 30px;">
                        <h4 style="color: var(--info-color);">Intelligence Controls</h4>
                        <div class="control-buttons">
                            <button onclick="startIntelligence()" class="btn" style="background: var(--info-color);">
                                üéØ Start Gathering
                            </button>
                            <button onclick="analyzeTrends()" class="btn" style="background: var(--accent);">
                                üìà Analyze Trends
                            </button>
                            <button onclick="exportIntelligence()" class="btn" style="background: var(--secondary);">
                                üíæ Export Data
                            </button>
                        </div>
                    </div>

                    <!-- Intelligence Feed -->
                    <div class="intelligence-feed" style="margin-top: 30px;">
                        <h4 style="color: var(--info-color);">Live Intelligence Feed</h4>
                        <div id="intelligence-feed" class="feed-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 400px;
                            overflow-y: auto;
                        ">
                            <div class="feed-item">
                                <div class="feed-header">
                                    <span class="feed-source">DARK WEB</span>
                                    <span class="feed-time">${new Date().toLocaleTimeString()}</span>
                                </div>
                                <div class="feed-content">Intelligence gathering system initialized</div>
                            </div>
                        </div>
                    </div>

                    <!-- Intelligence Log -->
                    <div class="intelligence-log" style="margin-top: 30px;">
                        <h4 style="color: var(--info-color);">Intelligence Activity Log</h4>
                        <div id="intelligence-log" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 300px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        ">
                            <div class="log-entry log-info">[${new Date().toLocaleTimeString()}] Intelligence system ready</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createWebhooksPage() {
            return `
                <div class="webhooks-management-page">
                    <h3 style="color: var(--success); margin-bottom: 20px;">üîó Webhooks Management</h3>

                    <!-- Webhooks Stats -->
                    <div class="webhooks-stats">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="webhook-count-value">0</div>
                                <div class="stat-label">Active Webhooks</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Triggers Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0%</div>
                                <div class="stat-label">Success Rate</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Failed Calls</div>
                            </div>
                        </div>
                    </div>

                    <!-- Webhook Creation -->
                    <div class="webhook-creation" style="margin-top: 30px;">
                        <button onclick="createNewWebhook()" class="btn" style="background: var(--success);">
                            ‚ûï Create New Webhook
                        </button>
                    </div>

                    <!-- Webhook Creator Form -->
                    <div id="webhook-creator" style="
                        background: rgba(0,0,0,0.3);
                        border-radius: 15px;
                        padding: 20px;
                        margin-top: 20px;
                        display: none;
                    ">
                        <h4 style="color: var(--success);">Create New Webhook</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Name</label>
                                <input type="text" id="webhook-name" placeholder="Alert Webhook" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(255,255,255,0.1);
                                    border: 1px solid rgba(255,255,255,0.2);
                                    border-radius: 6px;
                                    color: var(--light);
                                ">
                            </div>
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Event Type</label>
                                <select id="webhook-event-type" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(255,255,255,0.1);
                                    border: 1px solid rgba(255,255,255,0.2);
                                    border-radius: 6px;
                                    color: var(--light);
                                ">
                                    <option value="threat-detected">Threat Detected</option>
                                    <option value="crawler-activity">Crawler Activity</option>
                                    <option value="data-collected">Data Collected</option>
                                    <option value="system-alert">System Alert</option>
                                </select>
                            </div>
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">URL</label>
                                <input type="url" id="webhook-url" placeholder="https://api.example.com/webhook" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(255,255,255,0.1);
                                    border: 1px solid rgba(255,255,255,0.2);
                                    border-radius: 6px;
                                    color: var(--light);
                                ">
                            </div>
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Method</label>
                                <select id="webhook-method" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(255,255,255,0.1);
                                    border: 1px solid rgba(255,255,255,0.2);
                                    border-radius: 6px;
                                    color: var(--light);
                                ">
                                    <option value="POST">POST</option>
                                    <option value="GET">GET</option>
                                    <option value="PUT">PUT</option>
                                </select>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <button onclick="saveNewWebhook()" class="btn" style="background: var(--success); margin-right: 10px;">
                                üíæ Save Webhook
                            </button>
                            <button onclick="document.getElementById('webhook-creator').style.display='none'" class="btn" style="background: var(--danger);">
                                ‚ùå Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Active Webhooks List -->
                    <div class="webhooks-list" style="margin-top: 30px;">
                        <h4 style="color: var(--success);">Active Webhooks</h4>
                        <div id="webhooks-list" class="webhooks-container" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                            margin-top: 15px;
                        ">
                            <div class="webhook-item" style="
                                display: flex;
                                align-items: center;
                                justify-content: space-between;
                                padding: 15px;
                                background: rgba(255,255,255,0.05);
                                border-radius: 10px;
                                margin-bottom: 10px;
                            ">
                                <div class="webhook-info">
                                    <div class="webhook-name" style="color: var(--success); font-weight: bold;">No webhooks configured</div>
                                    <div class="webhook-details" style="color: #bdc3c7; font-size: 0.9rem;">Create your first webhook above</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createAnalyticsPage() {
            return `
                <div class="analytics-page">
                    <h3 style="color: var(--secondary); margin-bottom: 20px;">üìä System Analytics</h3>

                    <!-- Analytics Overview -->
                    <div class="analytics-overview">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Total Events</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Data Processed</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0%</div>
                                <div class="stat-label">System Uptime</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">Reports Generated</div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">Performance Metrics</h4>
                        <div class="charts-container" style="
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                            gap: 20px;
                            margin-top: 20px;
                        ">
                            <div class="chart-card" style="
                                background: rgba(0,0,0,0.5);
                                border: 1px solid rgba(255,255,255,0.1);
                                border-radius: 10px;
                                padding: 20px;
                                height: 300px;
                            ">
                                <h5 style="color: var(--primary); margin-bottom: 15px;">Threat Detection Over Time</h5>
                                <div class="chart-placeholder" style="
                                    height: 200px;
                                    background: rgba(255,255,255,0.05);
                                    border-radius: 5px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: #bdc3c7;
                                ">Chart will be rendered here</div>
                            </div>
                            <div class="chart-card" style="
                                background: rgba(0,0,0,0.5);
                                border: 1px solid rgba(255,255,255,0.1);
                                border-radius: 10px;
                                padding: 20px;
                                height: 300px;
                            ">
                                <h5 style="color: var(--primary); margin-bottom: 15px;">System Performance</h5>
                                <div class="chart-placeholder" style="
                                    height: 200px;
                                    background: rgba(255,255,255,0.05);
                                    border-radius: 5px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: #bdc3c7;
                                ">Performance metrics here</div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Controls -->
                    <div class="analytics-controls" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">Analytics Controls</h4>
                        <div class="control-buttons">
                            <button onclick="generateReport()" class="btn" style="background: var(--secondary);">
                                üìä Generate Report
                            </button>
                            <button onclick="exportAnalytics()" class="btn" style="background: var(--success);">
                                üíæ Export Data
                            </button>
                            <button onclick="clearAnalytics()" class="btn" style="background: var(--warning);">
                                üßπ Clear Data
                            </button>
                        </div>
                    </div>

                    <!-- Analytics Log -->
                    <div class="analytics-log" style="margin-top: 30px;">
                        <h4 style="color: var(--secondary);">Analytics Activity Log</h4>
                        <div id="analytics-log" class="logs-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 300px;
                            overflow-y: auto;
                            font-family: 'Courier New', monospace;
                            font-size: 12px;
                        ">
                            <div class="log-entry log-info">[${new Date().toLocaleTimeString()}] Analytics system initialized</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createVerificationPage() {
            return `
                <div class="verification-page">
                    <h3 style="color: var(--warning); margin-bottom: 20px;">üî¨ System Verification</h3>

                    <!-- Verification Status -->
                    <div class="verification-status">
                        <div class="status-panel" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <h4 style="color: var(--warning);">Verification Status</h4>
                            <div class="status-indicators">
                                <div class="status-item">
                                    <span class="status-label">Last Check:</span>
                                    <span class="status-value current-time">-</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Tests Passed:</span>
                                    <span class="status-value">0/0</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">System Health:</span>
                                    <span class="status-value">UNKNOWN</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Verification Controls -->
                    <div class="verification-controls">
                        <h4 style="color: var(--warning);">Verification Tests</h4>
                        <div class="control-buttons">
                            <button onclick="runFullVerification()" class="btn" style="background: var(--warning);">
                                üî¨ Run Full Check
                            </button>
                            <button onclick="runQuickVerification()" class="btn" style="background: var(--success);">
                                ‚ö° Quick Test
                            </button>
                            <button onclick="runCustomVerification()" class="btn" style="background: var(--secondary);">
                                üéØ Custom Tests
                            </button>
                        </div>
                    </div>

                    <!-- Test Results -->
                    <div class="test-results" style="margin-top: 30px;">
                        <h4 style="color: var(--warning);">Test Results</h4>
                        <div id="test-results" class="results-container" style="
                            background: rgba(0,0,0,0.5);
                            border: 1px solid rgba(255,255,255,0.1);
                            border-radius: 10px;
                            padding: 15px;
                            height: 400px;
                            overflow-y: auto;
                        ">
                            <div class="result-item">
                                <span class="result-timestamp">[${new Date().toLocaleTimeString()}]</span>
                                <span class="result-type">SYSTEM</span>
                                <span class="result-message">Verification system ready</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createSettingsPage() {
            return `
                <div class="settings-page">
                    <h3 style="color: var(--accent); margin-bottom: 20px;">‚öôÔ∏è System Settings</h3>

                    <!-- Settings Categories -->
                    <div class="settings-categories" style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 20px;
                        margin-bottom: 30px;
                    ">
                        <div class="settings-category" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                        ">
                            <h4 style="color: var(--primary);">Security Settings</h4>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Threat Detection Level</label>
                                <select style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option>Low</option>
                                    <option selected>Medium</option>
                                    <option>High</option>
                                    <option>Maximum</option>
                                </select>
                            </div>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Auto-Response</label>
                                <input type="checkbox" checked style="margin-right: 10px;">
                                <span style="color: #bdc3c7;">Enable automatic threat response</span>
                            </div>
                        </div>

                        <div class="settings-category" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                        ">
                            <h4 style="color: var(--secondary);">Performance Settings</h4>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Max Concurrent Operations</label>
                                <input type="number" value="10" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Memory Limit (MB)</label>
                                <input type="number" value="512" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                        </div>

                        <div class="settings-category" style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 15px;
                            padding: 20px;
                        ">
                            <h4 style="color: var(--accent);">Logging Settings</h4>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Log Level</label>
                                <select style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option>Debug</option>
                                    <option selected>Info</option>
                                    <option>Warning</option>
                                    <option>Error</option>
                                </select>
                            </div>
                            <div class="setting-item" style="margin: 15px 0;">
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Log Retention (days)</label>
                                <input type="number" value="30" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                        </div>
                    </div>

                    <!-- Settings Actions -->
                    <div class="settings-actions">
                        <h4 style="color: var(--accent);">Settings Actions</h4>
                        <div class="control-buttons">
                            <button onclick="saveSettings()" class="btn" style="background: var(--success);">
                                üíæ Save Settings
                            </button>
                            <button onclick="resetSettings()" class="btn" style="background: var(--warning);">
                                üîÑ Reset to Default
                            </button>
                            <button onclick="exportSettings()" class="btn" style="background: var(--secondary);">
                                üíæ Export Config
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Placeholder functions for controls
        function runThreatScan() { addMilitaryLog('THREAT_SCAN', 'Full threat scan initiated', 'info'); }
        function enableRealTime() { addMilitaryLog('THREAT_SCAN', 'Real-time threat detection enabled', 'success'); }
        function showThreatConfig() { showDialog('threat-config-dialog'); }
        function startCrawler() { addMilitaryLog('CRAWLER', 'Crawler started', 'success'); }
        function pauseCrawler() { addMilitaryLog('CRAWLER', 'Crawler paused', 'warning'); }
        function stopCrawler() { addMilitaryLog('CRAWLER', 'Crawler stopped', 'info'); }
        function startForensicsScan() { addMilitaryLog('FORENSICS', 'Deep forensics scan started', 'info'); }
        function analyzeFile() { addMilitaryLog('FORENSICS', 'File analysis initiated', 'info'); }
        function generateReport() { addMilitaryLog('SYSTEM', 'Report generation started', 'info'); }
        function startIntelligence() { addMilitaryLog('INTELLIGENCE', 'Intelligence gathering started', 'info'); }
        function analyzeTrends() { addMilitaryLog('INTELLIGENCE', 'Trend analysis initiated', 'info'); }
        function exportIntelligence() { addMilitaryLog('INTELLIGENCE', 'Data export started', 'info'); }
        function runFullVerification() { addMilitaryLog('VERIFICATION', 'Full system verification started', 'info'); }
        function runQuickVerification() { addMilitaryLog('VERIFICATION', 'Quick verification completed', 'success'); }
        function runCustomVerification() { addMilitaryLog('VERIFICATION', 'Custom verification started', 'info'); }
        function saveSettings() { addMilitaryLog('SETTINGS', 'Settings saved successfully', 'success'); }
        function resetSettings() { addMilitaryLog('SETTINGS', 'Settings reset to defaults', 'warning'); }
        function exportSettings() { addMilitaryLog('SETTINGS', 'Settings exported', 'info'); }
        function exportAnalytics() { addMilitaryLog('ANALYTICS', 'Analytics data exported', 'info'); }
        function clearAnalytics() { addMilitaryLog('ANALYTICS', 'Analytics data cleared', 'warning'); }
    </script>
    <style>
        :root {
            --primary: #ff6b6b;
            --secondary: #4ecdc4;
            --accent: #45b7d1;
            --danger: #f39c12;
            --success: #27ae60;
            --warning: #e67e22;
            --dark: #2c3e50;
            --darker: #1a252f;
            --light: #ecf0f1;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glow: 0 0 20px rgba(255, 107, 107, 0.3);
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
        }

        .status-success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--error-color);
            color: var(--error-color);
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid var(--warning-color);
            color: var(--warning-color);
        }

        .status-info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid var(--info-color);
            color: var(--info-color);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--darker);
            color: var(--light);
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Section */
        .header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 100%);
            border-radius: 20px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 107, 107, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .header .subtitle {
            font-size: 1.5rem;
            color: #bdc3c7;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .status-badge {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 8px 32px rgba(39, 174, 96, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Grid Layout */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
        }

        .card p {
            color: #bdc3c7;
            margin-bottom: 20px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.08);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            display: block;
        }

        .stat-label {
            color: #bdc3c7;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Feature List */
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .feature-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            color: var(--secondary);
        }

        .feature-text h4 {
            color: var(--light);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .feature-text p {
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 1s ease;
        }

        /* System Status */
        .system-status {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.1));
            border: 1px solid rgba(39, 174, 96, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }

        .system-status h3 {
            color: var(--success);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .status-item {
            padding: 10px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 10px;
            color: var(--success);
            font-weight: 500;
        }

        /* Code Blocks */
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            overflow-x: auto;
        }

        .code-block pre {
            color: #61dafb;
            margin: 0;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--accent), var(--secondary));
        }

        /* Control Panels */
        .control-panel {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .control-panel::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 15px 15px 0 0;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .control-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .control-item h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            margin: 10px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .performance-slider {
            width: 100%;
            margin: 15px 0;
        }

        .performance-slider input {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }

        .performance-slider input:hover {
            opacity: 1;
        }

        .performance-slider input::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .performance-slider input::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
        }

        .targeting-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .target-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: var(--light);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .target-btn:hover,
        .target-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }

        .settings-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .settings-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .global-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.3);
        }

        .global-controls h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 60px;
        }

        .footer p {
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        .animate-delay-1 { animation-delay: 0.1s; }
        .animate-delay-2 { animation-delay: 0.2s; }
        .animate-delay-3 { animation-delay: 0.3s; }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .container {
                padding: 10px;
            }
        }

        /* Navigation Tabs */
        .nav-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        /* Container Pages */
        .container-page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .container-page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Webhook Items */
        .webhook-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .webhook-info {
            flex: 1;
        }

        .webhook-name {
            color: var(--success);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .webhook-details {
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        .webhook-actions {
            display: flex;
            gap: 10px;
        }

        .webhook-action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .webhook-test-btn {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .webhook-edit-btn {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }

        .webhook-delete-btn {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        /* Glow Effects */
        .glow-primary {
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }

        .glow-secondary {
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .glow-accent {
            box-shadow: 0 0 20px rgba(69, 183, 209, 0.3);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Global Controls Panel -->
        <div id="globalControls" class="global-controls" style="display: none;">
            <button class="close-btn" onclick="toggleGlobalControls()">&times;</button>
            <h3>üéõÔ∏è Global System Controls</h3>

            <div class="control-item">
                <h4>Master Power</h4>
                <label class="toggle-switch">
                    <input type="checkbox" id="masterPower" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="control-item">
                <h4>Stealth Mode</h4>
                <label class="toggle-switch">
                    <input type="checkbox" id="stealthMode" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="control-item">
                <h4>Global Performance</h4>
                <div class="performance-slider">
                    <input type="range" id="globalPerformance" min="1" max="10" value="9">
                </div>
                <span id="globalPerfValue">9</span>
            </div>

            <div class="control-item">
                <h4>Auto-Scaling</h4>
                <label class="toggle-switch">
                    <input type="checkbox" id="autoScaling" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <button class="btn" onclick="applyGlobalSettings()">Apply Settings</button>
        </div>

        <!-- Master Control Header -->
        <header class="header animate-fade-in">
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div>
                    <h1>üî• BLOOMCRAWLER RIIS</h1>
                    <p class="subtitle">Master Control Dashboard - Autonomous Cyber Intelligence</p>
                </div>
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div id="connection-status" style="padding: 8px 16px; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 0.9rem;">
                        <span id="ws-status-indicator" style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; background: #6b7280; margin-right: 8px;"></span>
                        <span id="ws-status-text">Initializing...</span>
                    </div>
                    <div class="status-badge" id="master-status">üõ°Ô∏è MASTER CONTROL ACTIVE</div>
                </div>
            </div>

            <!-- Quick Action Bar -->
            <div style="display: flex; gap: 15px; margin-top: 25px; justify-content: center; flex-wrap: wrap;">
                <button class="btn-secondary" onclick="toggleGlobalControls()">üéõÔ∏è System Controls</button>
                <button class="btn-primary" onclick="toggleLiveStats()">üìä Live Stats</button>
                <button class="btn-secondary" onclick="toggleActivityLog()">üìã Activity Log</button>
                <button class="btn-accent" onclick="toggleAdvancedMode()">‚ö° Advanced Mode</button>
                <button class="btn-danger" onclick="emergencyStop()">üö® Emergency Stop</button>
                <button class="btn-success" onclick="forceReconnect()">üîÑ Reconnect</button>
            </div>
        </header>

        <!-- System Status -->
        <div class="system-status animate-fade-in animate-delay-1">
            <h3>üöÄ FULL SYSTEM ACTIVATION</h3>
            <div class="status-grid">
                <div class="status-item">‚úÖ Recursive Bloom Engine</div>
                <div class="status-item">‚úÖ Advanced Threat Detection</div>
                <div class="status-item">‚úÖ Unified Web Crawler</div>
                <div class="status-item">‚úÖ Entity Recognition</div>
                <div class="status-item">‚úÖ Predictive Analytics</div>
                <div class="status-item">‚úÖ SOAR Automation</div>
                <div class="status-item">‚úÖ Real-time Monitoring</div>
                <div class="status-item">‚úÖ Dark Web Crawling</div>
                <div class="status-item">‚úÖ TOR Network Access</div>
                <div class="status-item">‚úÖ I2P Network Access</div>
                <div class="status-item">‚úÖ Image Forensics</div>
                <div class="status-item">‚úÖ LLM Detection</div>
                <div class="status-item">‚úÖ AI Image Analysis</div>
                <div class="status-item">‚úÖ Undetectable Crawling</div>
                <div class="status-item">‚úÖ Stealth Mode</div>
                <div class="status-item">‚úÖ Metadata Extraction</div>
                <div class="status-item">‚úÖ IP Intelligence</div>
                <div class="status-item">‚úÖ Advanced Anti-Detection</div>
            </div>
        </div>

        <!-- LIVE STATS DASHBOARD -->
        <div class="live-stats-panel animate-fade-in" style="
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(78, 205, 196, 0.1) 100%);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        ">
            <h2 style="font-size: 2rem; margin-bottom: 25px; text-align: center; background: linear-gradient(45deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                üìä LIVE SYSTEM STATISTICS
            </h2>
            <div class="live-stats-grid" style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            ">
                <!-- Crawler Stats -->
                <div class="live-stat-card" style="
                    background: var(--glass);
                    border: 1px solid var(--glass-border);
                    border-radius: 15px;
                    padding: 20px;
                    backdrop-filter: blur(10px);
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 2rem; margin-right: 10px;">üï∑Ô∏è</span>
                        <h3 style="margin: 0; color: var(--primary);">Crawler</h3>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Active Crawls:</span>
                        <span id="live-active-crawls" class="live-stat-value" style="color: var(--secondary); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Total Targets:</span>
                        <span id="live-total-targets" class="live-stat-value" style="color: var(--secondary); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Items Processed:</span>
                        <span id="live-items-processed" class="live-stat-value" style="color: var(--secondary); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: var(--light); opacity: 0.8;">Processing Rate:</span>
                        <span id="live-processing-rate" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0.0/s</span>
                    </div>
                </div>

                <!-- Threat Stats -->
                <div class="live-stat-card" style="
                    background: var(--glass);
                    border: 1px solid var(--glass-border);
                    border-radius: 15px;
                    padding: 20px;
                    backdrop-filter: blur(10px);
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 2rem; margin-right: 10px;">üö®</span>
                        <h3 style="margin: 0; color: var(--danger);">Threats</h3>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Total Detected:</span>
                        <span id="live-threats-detected" class="live-stat-value" style="color: var(--danger); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Critical:</span>
                        <span id="live-critical-threats" class="live-stat-value" style="color: var(--danger); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Risk Score:</span>
                        <span id="live-risk-score" class="live-stat-value" style="color: var(--warning); font-weight: bold; font-size: 1.3rem; float: right;">0.0</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: var(--light); opacity: 0.8;">Active Monitors:</span>
                        <span id="live-active-monitors" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">Active</span>
                    </div>
                </div>

                <!-- Bloom Stats -->
                <div class="live-stat-card" style="
                    background: var(--glass);
                    border: 1px solid var(--glass-border);
                    border-radius: 15px;
                    padding: 20px;
                    backdrop-filter: blur(10px);
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 2rem; margin-right: 10px;">üå∏</span>
                        <h3 style="margin: 0; color: var(--warning);">Bloom Engine</h3>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Active Seeds:</span>
                        <span id="live-active-seeds" class="live-stat-value" style="color: var(--warning); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Deployments:</span>
                        <span id="live-deployments" class="live-stat-value" style="color: var(--warning); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Total Activations:</span>
                        <span id="live-total-activations" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: var(--light); opacity: 0.8;">LLM Protected:</span>
                        <span id="live-llm-protected" class="live-stat-value" style="color: var(--success); font-weight: bold; font-size: 1.3rem; float: right;">Yes</span>
                    </div>
                </div>

                <!-- Swarm Stats -->
                <div class="live-stat-card" style="
                    background: var(--glass);
                    border: 1px solid var(--glass-border);
                    border-radius: 15px;
                    padding: 20px;
                    backdrop-filter: blur(10px);
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 2rem; margin-right: 10px;">üêú</span>
                        <h3 style="margin: 0; color: var(--accent);">Swarm Crawler</h3>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Active Workers:</span>
                        <span id="live-active-workers" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Items Found:</span>
                        <span id="live-items-found" class="live-stat-value" style="color: var(--success); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Status:</span>
                        <span id="live-swarm-status" class="live-stat-value" style="color: var(--success); font-weight: bold; font-size: 1.3rem; float: right;">Running</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: var(--light); opacity: 0.8;">Success Rate:</span>
                        <span id="live-success-rate" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">100%</span>
                    </div>
                </div>

                <!-- Network Stats -->
                <div class="live-stat-card" style="
                    background: var(--glass);
                    border: 1px solid var(--glass-border);
                    border-radius: 15px;
                    padding: 20px;
                    backdrop-filter: blur(10px);
                ">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <span style="font-size: 2rem; margin-right: 10px;">üåê</span>
                        <h3 style="margin: 0; color: var(--secondary);">Network</h3>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">TOR Targets:</span>
                        <span id="live-tor-targets" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">I2P Targets:</span>
                        <span id="live-i2p-targets" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item" style="margin-bottom: 10px;">
                        <span style="color: var(--light); opacity: 0.8;">Metadata Extracted:</span>
                        <span id="live-metadata-count" class="live-stat-value" style="color: var(--secondary); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: var(--light); opacity: 0.8;">ISP Checks:</span>
                        <span id="live-isp-checks" class="live-stat-value" style="color: var(--accent); font-weight: bold; font-size: 1.3rem; float: right;">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- MILITARY-GRADE LOGGING SYSTEM -->
        <div class="military-logging-system animate-fade-in" style="
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 style="font-size: 2rem; margin: 0; background: linear-gradient(45deg, #ef4444, #dc2626); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    ü™ñ MILITARY-GRADE LOGGING SYSTEM
                </h2>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <span style="padding: 5px 12px; background: rgba(239, 68, 68, 0.2); border-radius: 8px; font-size: 0.9rem;">
                        <span id="alerts-count">0</span> active alerts
                    </span>
                    <button onclick="clearAllLogs()" style="
                        padding: 8px 16px;
                        background: rgba(239, 68, 68, 0.3);
                        border: 1px solid #ef4444;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">üßπ Clear All</button>
                    <button onclick="exportLogs()" style="
                        padding: 8px 16px;
                        background: rgba(220, 38, 38, 0.2);
                        border: 1px solid #dc2626;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">üíæ Export Logs</button>
                </div>
            </div>

            <!-- Time & Status Bar -->
            <div class="time-status-bar" style="
                background: rgba(0,0,0,0.5);
                border-radius: 10px;
                padding: 15px;
                margin-bottom: 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            ">
                <div style="display: flex; gap: 20px;">
                    <div><strong>Current Time:</strong> <span class="current-time">00:00:00</span></div>
                    <div><strong>Current Date:</strong> <span class="current-date">2025-01-01</span></div>
                    <div><strong>System Uptime:</strong> <span id="system-uptime">00:00:00</span></div>
                </div>
                <div style="display: flex; gap: 15px;">
                    <div><strong>Log Level:</strong> <select id="log-level-filter" style="padding: 2px 6px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                        <option value="all">All</option>
                        <option value="error">Errors</option>
                        <option value="warning">Warnings</option>
                        <option value="info">Info</option>
                        <option value="success">Success</option>
                    </select></div>
                    <div><strong>Auto-scroll:</strong> <input type="checkbox" id="auto-scroll" checked></div>
                </div>
            </div>

            <!-- Active Alerts Queue -->
            <div class="alerts-queue" style="margin-bottom: 20px;">
                <h4 style="color: var(--danger); margin-bottom: 10px;">üö® Active Alerts (<span id="alerts-count">0</span>)</h4>
                <div id="alerts-queue" class="alerts-container" style="
                    background: rgba(0,0,0,0.3);
                    border-radius: 10px;
                    padding: 15px;
                    max-height: 150px;
                    overflow-y: auto;
                ">
                    <div class="alert-item" style="color: #bdc3c7; font-style: italic;">No active alerts</div>
                </div>
            </div>

            <!-- Military Logs Display -->
            <div class="military-logs-display">
                <h4 style="color: var(--danger); margin-bottom: 10px;">üìã Military Operations Log</h4>
                <div id="military-logs" class="logs-container" style="
                    background: rgba(0,0,0,0.5);
                    border: 2px solid rgba(239, 68, 68, 0.3);
                    border-radius: 10px;
                    padding: 15px;
                    height: 400px;
                    overflow-y: auto;
                    font-family: 'Courier New', monospace;
                    font-size: 11px;
                    font-weight: bold;
                "></div>
            </div>
        </div>

        <!-- LIVING CONTAINER SYSTEM -->
        <div class="living-container-system animate-fade-in" style="
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 style="font-size: 2rem; margin: 0; background: linear-gradient(45deg, #8b5cf6, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    üåê LIVING CONTAINER SYSTEM - Dynamic Sub-Pages
                </h2>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <span id="active-containers" style="padding: 5px 12px; background: rgba(139, 92, 246, 0.2); border-radius: 8px; font-size: 0.9rem;">
                        <span id="active-containers-count">0</span> active
                    </span>
                    <button onclick="createNewContainer()" style="
                        padding: 8px 16px;
                        background: rgba(139, 92, 246, 0.3);
                        border: 1px solid #8b5cf6;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">‚ûï New Container</button>
                    <button onclick="toggleContainerView()" id="container-view-btn" style="
                        padding: 8px 16px;
                        background: rgba(168, 85, 247, 0.2);
                        border: 1px solid #a855f7;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">Grid View</button>
                </div>
            </div>

            <!-- Container Navigation -->
            <div id="container-navigation" style="
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
                overflow-x: auto;
                padding: 10px 0;
            ">
                <button onclick="loadSubPage('dashboard')" class="nav-tab active" data-page="dashboard">üè† Dashboard</button>
                <button onclick="loadSubPage('threat-detection')" class="nav-tab" data-page="threat-detection">üõ°Ô∏è Threats</button>
                <button onclick="loadSubPage('crawler-control')" class="nav-tab" data-page="crawler-control">üï∑Ô∏è Crawler</button>
                <button onclick="loadSubPage('forensics')" class="nav-tab" data-page="forensics">ü§ñ Forensics</button>
                <button onclick="loadSubPage('intelligence')" class="nav-tab" data-page="intelligence">üéØ Intelligence</button>
                <button onclick="loadSubPage('webhooks')" class="nav-tab" data-page="webhooks">üîó Webhooks</button>
                <button onclick="loadSubPage('analytics')" class="nav-tab" data-page="analytics">üìä Analytics</button>
                <button onclick="loadSubPage('verification')" class="nav-tab" data-page="verification">üî¨ Verification</button>
                <button onclick="loadSubPage('settings')" class="nav-tab" data-page="settings">‚öôÔ∏è Settings</button>
            </div>

            <!-- Dynamic Container Content -->
            <div id="container-content-area" style="
                min-height: 600px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 15px;
                padding: 20px;
                position: relative;
            ">
                <!-- Loading indicator -->
                <div id="container-loading" style="
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    text-align: center;
                    color: var(--secondary);
                    display: none;
                ">
                    <div style="font-size: 3rem; margin-bottom: 15px;">‚è≥</div>
                    <div>Loading container...</div>
                </div>

                <!-- Default dashboard content -->
                <div id="default-dashboard" class="container-page active">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">üè† Main Dashboard</h3>
                    <p style="color: #bdc3c7; margin-bottom: 20px;">Welcome to the living container system. Select a sub-page from the navigation above.</p>

                    <!-- Quick stats -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üåê</div>
                            <div style="color: var(--secondary); font-weight: bold;">Containers</div>
                            <div style="color: #bdc3c7;">0 Active</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üîó</div>
                            <div style="color: var(--secondary); font-weight: bold;">Webhooks</div>
                            <div style="color: #bdc3c7;">0 Active</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üìä</div>
                            <div style="color: var(--secondary); font-weight: bold;">Data Points</div>
                            <div style="color: #bdc3c7;">0 Collected</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">‚ö°</div>
                            <div style="color: var(--secondary); font-weight: bold;">Operations</div>
                            <div style="color: #bdc3c7;">Running</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- WEBHOOK MANAGEMENT SYSTEM -->
        <div class="webhook-management-system animate-fade-in" style="
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(22, 163, 74, 0.1) 100%);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 style="font-size: 2rem; margin: 0; background: linear-gradient(45deg, #22c55e, #16a34a); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    üîó WEBHOOK MANAGEMENT - Self-Generating System
                </h2>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <span id="webhook-count" style="padding: 5px 12px; background: rgba(34, 197, 94, 0.2); border-radius: 8px; font-size: 0.9rem;">
                        <span id="webhook-count-value">0</span> webhooks
                    </span>
                    <button onclick="createNewWebhook()" style="
                        padding: 8px 16px;
                        background: rgba(34, 197, 94, 0.3);
                        border: 1px solid #22c55e;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">‚ûï Create Webhook</button>
                    <button onclick="testAllWebhooks()" style="
                        padding: 8px 16px;
                        background: rgba(59, 130, 246, 0.2);
                        border: 1px solid #3b82f6;
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 12px;
                    ">üß™ Test All</button>
                </div>
            </div>

            <!-- Webhook Creation Form -->
            <div id="webhook-creator" style="
                background: rgba(0, 0, 0, 0.3);
                border-radius: 15px;
                padding: 20px;
                margin-bottom: 20px;
                display: none;
            ">
                <h3 style="color: var(--success); margin-bottom: 15px;">üéØ Create New Webhook</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Webhook Name</label>
                        <input type="text" id="webhook-name" placeholder="e.g., Threat Alert" style="
                            width: 100%;
                            padding: 8px 12px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            border-radius: 6px;
                            color: var(--light);
                        ">
                    </div>
                    <div>
                        <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Event Type</label>
                        <select id="webhook-event-type" style="
                            width: 100%;
                            padding: 8px 12px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            border-radius: 6px;
                            color: var(--light);
                        ">
                            <option value="threat-detected">Threat Detected</option>
                            <option value="crawler-activity">Crawler Activity</option>
                            <option value="data-collected">Data Collected</option>
                            <option value="system-status">System Status</option>
                            <option value="intelligence-update">Intelligence Update</option>
                            <option value="forensics-result">Forensics Result</option>
                        </select>
                    </div>
                    <div>
                        <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Target URL</label>
                        <input type="url" id="webhook-url" placeholder="https://example.com/webhook" style="
                            width: 100%;
                            padding: 8px 12px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            border-radius: 6px;
                            color: var(--light);
                        ">
                    </div>
                    <div>
                        <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Method</label>
                        <select id="webhook-method" style="
                            width: 100%;
                            padding: 8px 12px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            border-radius: 6px;
                            color: var(--light);
                        ">
                            <option value="POST">POST</option>
                            <option value="GET">GET</option>
                            <option value="PUT">PUT</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: 15px; display: flex; gap: 10px;">
                    <button onclick="saveWebhook()" style="
                        padding: 10px 20px;
                        background: var(--success);
                        border: none;
                        border-radius: 8px;
                        color: white;
                        cursor: pointer;
                        font-weight: 600;
                    ">üíæ Save Webhook</button>
                    <button onclick="cancelWebhookCreation()" style="
                        padding: 10px 20px;
                        background: rgba(255,255,255,0.1);
                        border: 1px solid rgba(255,255,255,0.2);
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                    ">‚ùå Cancel</button>
                </div>
            </div>

            <!-- Active Webhooks List -->
            <div id="webhooks-list" style="
                background: rgba(0, 0, 0, 0.3);
                border-radius: 15px;
                padding: 20px;
            ">
                <h3 style="color: var(--success); margin-bottom: 15px;">üìã Active Webhooks</h3>
                <div id="webhooks-container" style="display: grid; gap: 10px;">
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üîó</div>
                        <div>No webhooks created yet</div>
                        <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Click "Create Webhook" to add your first webhook</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LIVE ACTIVITY LOG PANEL -->
                <div class="live-activity-panel animate-fade-in" style="
                    background: rgba(26, 32, 44, 0.9);
                    border: 2px solid var(--glass-border);
                    border-radius: 20px;
                    padding: 25px;
                    margin-bottom: 40px;
                    backdrop-filter: blur(10px);
                    height: 500px;
                    display: flex;
                    flex-direction: column;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="font-size: 1.8rem; margin: 0; background: linear-gradient(45deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            üìã LIVE ACTIVITY LOG - Autonomous Worm Operations
                        </h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="log-count" style="padding: 5px 12px; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 0.9rem;">
                                <span id="log-count-value">0</span> logs
                            </span>
                            <button onclick="clearActivityLogs()" style="
                                padding: 8px 16px;
                                background: rgba(255, 107, 107, 0.2);
                                border: 1px solid var(--primary);
                                border-radius: 8px;
                                color: var(--light);
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 12px;
                            ">üóëÔ∏è Clear</button>
                            <button onclick="toggleLogAutoScroll()" id="autoscroll-btn" style="
                                padding: 8px 16px;
                                background: rgba(78, 205, 196, 0.2);
                                border: 1px solid var(--secondary);
                                border-radius: 8px;
                                color: var(--light);
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 12px;
                            ">Auto-scroll: ON</button>
                            <button onclick="exportActivityLogs()" style="
                                padding: 8px 16px;
                                background: rgba(139, 92, 246, 0.2);
                                border: 1px solid #8b5cf6;
                                border-radius: 8px;
                                color: var(--light);
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 12px;
                            ">üì§ Export</button>
                        </div>
                    </div>
                    <div id="live-activity-log-container" style="
                        flex: 1;
                        overflow-y: auto;
                        font-family: 'Courier New', monospace;
                        font-size: 13px;
                        background: rgba(0, 0, 0, 0.3);
                        border-radius: 10px;
                        padding: 15px;
                    ">
                        <div style="color: var(--secondary); text-align: center; padding: 40px;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">üîå</div>
                            <div>Initializing autonomous crawler system...</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Establishing WebSocket connection</div>
                        </div>
                    </div>
                </div>

        <!-- Statistics Dashboard -->
        <div class="grid animate-fade-in animate-delay-1">
            <div class="card glow-primary" onclick="window.location.href='threat-detection-config.html'">
                <span class="card-icon">üéØ</span>
                <h3>Active Intelligence Operations</h3>
                <p>Real-time cyber threat monitoring and analysis across multiple networks</p>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number" id="card-active-seeds">5</span>
                        <span class="stat-label">Active Seeds</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="card-network-targets">3</span>
                        <span class="stat-label">Network Targets</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="card-workers">15</span>
                        <span class="stat-number">Workers</span>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card glow-secondary" onclick="window.location.href='predictive-analytics-config.html'">
                <span class="card-icon">üîÆ</span>
                <h3>Predictive Analytics Engine</h3>
                <p>9/10 performance threat forecasting with AI/ML models and behavioral analysis</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 90%"></div>
                </div>
                <p style="text-align: center; color: var(--secondary); font-weight: bold;">9/10 Forecasting Accuracy</p>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card" onclick="window.location.href='web-crawler-config.html'">
                <span class="card-icon">üïµÔ∏è‚Äç‚ôÇÔ∏è</span>
                <h3>Stealth Operations</h3>
                <p>Advanced undetectable crawling with rotating user agents and intelligent delays</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 95%"></div>
                </div>
                <p style="text-align: center; color: var(--secondary); font-weight: bold;">95% Stealth Effectiveness</p>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card glow-accent" onclick="window.location.href='ai-forensics-config.html'">
                <span class="card-icon">ü§ñ</span>
                <h3>AI Forensics Engine</h3>
                <p>Multi-model LLM detection and advanced image analysis capabilities</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üé®</span>
                        <div class="feature-text">
                            <h4>Stable Diffusion</h4>
                            <p>Advanced model detection</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üñºÔ∏è</span>
                        <div class="feature-text">
                            <h4>DALL-E & Midjourney</h4>
                            <p>Cross-platform analysis</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>
        </div>

        <!-- Core Features -->
        <div class="grid animate-fade-in animate-delay-2">
            <div class="card" onclick="window.location.href='web-crawler-config.html'">
                <span class="card-icon">üåë</span>
                <h3>Dark Web Intelligence</h3>
                <p>Comprehensive dark web monitoring with TOR and I2P network integration</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üßÖ</span>
                        <div class="feature-text">
                            <h4>TOR Network</h4>
                            <p>Hidden service crawling with SOCKS proxy</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîó</span>
                        <div class="feature-text">
                            <h4>I2P Anonymous</h4>
                            <p>Eepsite surveillance and monitoring</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üìä</span>
                        <div class="feature-text">
                            <h4>Real-time Analysis</h4>
                            <p>Live content extraction and processing</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card" onclick="window.location.href='web-crawler-config.html'">
                <span class="card-icon">üìä</span>
                <h3>Metadata Intelligence</h3>
                <p>Advanced metadata extraction and analysis from all crawled content</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üë§</span>
                        <div class="feature-text">
                            <h4>Contact Extraction</h4>
                            <p>Emails, phones, addresses, geolocation</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîß</span>
                        <div class="feature-text">
                            <h4>Technology Stack</h4>
                            <p>Framework, CMS, server detection</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üõ°Ô∏è</span>
                        <div class="feature-text">
                            <h4>Security Analysis</h4>
                            <p>Headers, certificates, vulnerabilities</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card" onclick="window.location.href='web-crawler-config.html'">
                <span class="card-icon">üåê</span>
                <h3>IP Intelligence Network</h3>
                <p>Comprehensive IP address analysis and threat intelligence gathering</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üìç</span>
                        <div class="feature-text">
                            <h4>Geolocation</h4>
                            <p>Country, region, city mapping</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚ö†Ô∏è</span>
                        <div class="feature-text">
                            <h4>Threat Scoring</h4>
                            <p>Risk assessment and reputation</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîó</span>
                        <div class="feature-text">
                            <h4>Domain Correlation</h4>
                            <p>Associated infrastructure mapping</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>
        </div>

        <!-- Advanced Features -->
        <div class="grid animate-fade-in animate-delay-3">
            <div class="card" onclick="window.location.href='predictive-analytics-config.html'">
                <span class="card-icon">‚ö°</span>
                <h3>Real-Time Systems</h3>
                <p>Live monitoring and WebSocket-powered updates across all components</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üì°</span>
                        <div class="feature-text">
                            <h4>WebSocket Streaming</h4>
                            <p>Real-time data broadcasting</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîÑ</span>
                        <div class="feature-text">
                            <h4>Live Updates</h4>
                            <p>Continuous system monitoring</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üìä</span>
                        <div class="feature-text">
                            <h4>Analytics Dashboard</h4>
                            <p>Real-time metrics and insights</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card" onclick="window.location.href='threat-detection-config.html'">
                <span class="card-icon">üõ°Ô∏è</span>
                <h3>Enterprise Security</h3>
                <p>Military-grade security with advanced anti-detection and privacy protection</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üîí</span>
                        <div class="feature-text">
                            <h4>Helmet.js Headers</h4>
                            <p>Comprehensive security headers</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üö¶</span>
                        <div class="feature-text">
                            <h4>Rate Limiting</h4>
                            <p>API abuse prevention</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîê</span>
                        <div class="feature-text">
                            <h4>Input Validation</h4>
                        <p>Data sanitization and security</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>

            <div class="card" onclick="window.location.href='threat-detection-config.html'">
                <span class="card-icon">üéØ</span>
                <h3>Attack Vector Database</h3>
                <p>Comprehensive 584+ cyber attack vectors with real-time monitoring</p>
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">üìã</span>
                        <div class="feature-text">
                            <h4>12 Categories</h4>
                            <p>Complete threat taxonomy</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üîç</span>
                        <div class="feature-text">
                            <h4>Real-time Tracking</h4>
                            <p>Live incident monitoring</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üìà</span>
                        <div class="feature-text">
                            <h4>Analytics</h4>
                            <p>Threat pattern analysis</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; font-size: 0.9rem; color: var(--secondary); cursor: pointer;">‚öôÔ∏è Configure ‚Üí</div>
            </div>
        </div>

        <!-- Code Example -->
        <div class="card animate-fade-in animate-delay-3">
            <h3>üöÄ System Activation Code</h3>
            <p>Behind the scenes - the power of BLOOMCRAWLER RIIS</p>
            <div class="code-block">
                <pre><code>// BLOOMCRAWLER RIIS - Ultimate Full Activation
üî• BLOOMCRAWLER RIIS - ULTIMATE FULL ACTIVATION üî•
================================================
‚úÖ Recursive Bloom Engine: FULLY ACTIVE
‚úÖ Advanced Threat Detection: OPERATIONAL
‚úÖ Unified Web Crawler: SCANNING
‚úÖ Entity Recognition: PROCESSING
‚úÖ Predictive Analytics: FORECASTING
‚úÖ Relationship Graph: MAPPING
‚úÖ SOAR Automation: RESPONDING
‚úÖ Real-time Monitoring: ACTIVE
‚úÖ Web Crawling Engine: OPERATIONAL
‚úÖ Threat Forecasting: PREDICTING
‚úÖ Graph Database: CONNECTED
‚úÖ WebSocket Real-time Updates: ENABLED
‚úÖ DARK WEB CRAWLING: ACTIVE
‚úÖ TOR NETWORK ACCESS: ENABLED
‚úÖ I2P NETWORK ACCESS: ENABLED
‚úÖ IMAGE FORENSICS: OPERATIONAL
‚úÖ LLM DETECTION: ACTIVE
‚úÖ AI IMAGE ANALYSIS: RUNNING
‚úÖ UNDETECTABLE CRAWLING: ACTIVE
‚úÖ STEALTH MODE: ENABLED
‚úÖ METADATA EXTRACTION: OPERATIONAL
‚úÖ IP INTELLIGENCE: ACTIVE
‚úÖ ADVANCED ANTI-DETECTION: ENABLED
================================================</code></pre>
            </div>
        </div>

        <!-- Control Panels (Hidden by default) -->
        <div id="controlPanels" style="display: none;">
            <!-- Intelligence Operations Control Panel -->
            <div id="intelligence-panel" class="control-panel" style="display: none;">
                <h3>üéØ Intelligence Operations Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Bloom Engine</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="bloomEngine" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="bloomPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Threat Detection</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="threatDetection" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="threatPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Predictive Analytics</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="predictiveAnalytics" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="predictivePerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>SOAR Automation</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="soarAutomation" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="soarPerf" min="1" max="10" value="10">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üéØ Targeting Options</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setTarget('global')">üåç Global Intelligence</button>
                        <button class="target-btn" onclick="setTarget('darkweb')">üåë Dark Web Only</button>
                        <button class="target-btn" onclick="setTarget('surface')">üåê Surface Web Only</button>
                        <button class="target-btn" onclick="setTarget('financial')">üí∞ Financial Targets</button>
                        <button class="target-btn" onclick="setTarget('government')">üèõÔ∏è Government Targets</button>
                        <button class="target-btn" onclick="setTarget('corporate')">üè¢ Corporate Networks</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('intelligence')">Save Intelligence Settings</button>
            </div>

            <!-- Stealth Operations Control Panel -->
            <div id="stealth-panel" class="control-panel" style="display: none;">
                <h3>üïµÔ∏è‚Äç‚ôÇÔ∏è Stealth Operations Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>User Agent Rotation</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="userAgentRotation" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="userAgentPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Request Delays</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="requestDelays" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="delayPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Session Management</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="sessionManagement" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="sessionPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Anti-Detection</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="antiDetection" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="antiDetectPerf" min="1" max="10" value="9">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üîß Advanced Stealth Settings</h3>
                    <div class="control-grid">
                        <div class="control-item">
                            <h4>Referrer Simulation</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="referrerSim" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>Behavioral Mimicry</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="behavioralMimicry" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>Pattern Evasion</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="patternEvasion" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>Error Recovery</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="errorRecovery" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('stealth')">Save Stealth Settings</button>
            </div>

            <!-- AI Forensics Control Panel -->
            <div id="forensics-panel" class="control-panel" style="display: none;">
                <h3>ü§ñ AI Forensics Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Stable Diffusion Detection</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="stableDiffusion" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="stableDiffPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>DALL-E Analysis</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dalleAnalysis" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="dallePerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Midjourney Detection</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="midjourneyDetect" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="midjourneyPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>LLM Tracing</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="llmTracing" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="llmPerf" min="1" max="10" value="9">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üé® Forensics Targeting</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setForensicsTarget('all')">üéØ All AI Models</button>
                        <button class="target-btn" onclick="setForensicsTarget('commercial')">üíº Commercial Only</button>
                        <button class="target-btn" onclick="setForensicsTarget('open_source')">üîì Open Source Only</button>
                        <button class="target-btn" onclick="setForensicsTarget('deepfakes')">üë§ Deepfakes Only</button>
                        <button class="target-btn" onclick="setForensicsTarget('metadata')">üìä Metadata Analysis</button>
                        <button class="target-btn" onclick="setForensicsTarget('artifacts')">üîç Artifact Detection</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('forensics')">Save Forensics Settings</button>
            </div>

            <!-- Dark Web Control Panel -->
            <div id="darkweb-panel" class="control-panel" style="display: none;">
                <h3>üåë Dark Web Intelligence Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>TOR Network Crawling</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="torCrawling" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="torPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>I2P Network Crawling</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="i2pCrawling" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="i2pPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Freenet Monitoring</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="freenetMonitoring">
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="freenetPerf" min="1" max="10" value="8">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Marketplace Surveillance</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="marketplaceSurv" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="marketPerf" min="1" max="10" value="9">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üïµÔ∏è‚Äç‚ôÇÔ∏è Dark Web Targeting</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setDarkWebTarget('comprehensive')">üéØ Comprehensive Scan</button>
                        <button class="target-btn" onclick="setDarkWebTarget('markets')">üõí Marketplace Focus</button>
                        <button class="target-btn" onclick="setDarkWebTarget('forums')">üí¨ Forum Surveillance</button>
                        <button class="target-btn" onclick="setDarkWebTarget('services')">üîß Service Providers</button>
                        <button class="target-btn" onclick="setDarkWebTarget('intelligence')">üéØ Threat Intelligence</button>
                        <button class="target-btn" onclick="setDarkWebTarget('financial')">üí∞ Financial Networks</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('darkweb')">Save Dark Web Settings</button>
            </div>

            <!-- Metadata Control Panel -->
            <div id="metadata-panel" class="control-panel" style="display: none;">
                <h3>üìä Metadata Intelligence Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Contact Extraction</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="contactExtraction" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="contactPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Technology Detection</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="techDetection" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="techPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Security Analysis</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="securityAnalysis" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="securityPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Geolocation Extraction</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="geolocationExt" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="geoPerf" min="1" max="10" value="9">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üéØ Metadata Targeting</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setMetadataTarget('comprehensive')">üìä All Metadata</button>
                        <button class="target-btn" onclick="setMetadataTarget('contacts')">üë§ Contact Info Only</button>
                        <button class="target-btn" onclick="setMetadataTarget('technical')">üîß Technical Stack Only</button>
                        <button class="target-btn" onclick="setMetadataTarget('security')">üõ°Ô∏è Security Headers Only</button>
                        <button class="target-btn" onclick="setMetadataTarget('social')">üì± Social Media Only</button>
                        <button class="target-btn" onclick="setMetadataTarget('geographic')">üìç Geographic Data Only</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('metadata')">Save Metadata Settings</button>
            </div>

            <!-- IP Intelligence Control Panel -->
            <div id="ipintel-panel" class="control-panel" style="display: none;">
                <h3>üåê IP Intelligence Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Geolocation Analysis</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="geoAnalysis" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="geoAnalysisPerf" min="1" max="10" value="8">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Threat Scoring</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="threatScoring" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="threatScorePerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Domain Correlation</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="domainCorrelation" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="domainCorrPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Service Provider Tracking</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="serviceProviderTrack" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="serviceProvPerf" min="1" max="10" value="8">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üéØ IP Intelligence Targeting</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setIPTarget('global')">üåç Global IP Analysis</button>
                        <button class="target-btn" onclick="setIPTarget('malicious')">üö® Malicious IPs Only</button>
                        <button class="target-btn" onclick="setIPTarget('suspicious')">‚ö†Ô∏è Suspicious IPs Only</button>
                        <button class="target-btn" onclick="setIPTarget('service_providers')">üè¢ Service Providers</button>
                        <button class="target-btn" onclick="setIPTarget('government')">üèõÔ∏è Government IPs</button>
                        <button class="target-btn" onclick="setIPTarget('corporate')">üè¢ Corporate Networks</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üì¶ Global Packet Analysis</h3>
                    <div class="control-grid">
                        <div class="control-item">
                            <h4>TCP Packet Inspection</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="tcpInspection" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>UDP Traffic Analysis</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="udpAnalysis">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>Metadata Packet Capture</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="metadataCapture" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="control-item">
                            <h4>Protocol Analysis</h4>
                            <label class="toggle-switch">
                                <input type="checkbox" id="protocolAnalysis" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('ipintel')">Save IP Intelligence Settings</button>
            </div>

            <!-- Real-Time Systems Control Panel -->
            <div id="realtime-panel" class="control-panel" style="display: none;">
                <h3>‚ö° Real-Time Systems Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>WebSocket Streaming</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="websocketStreaming" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="websocketPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Live Updates</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="liveUpdates" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="liveUpdatePerf" min="1" max="10" value="8">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Analytics Dashboard</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="analyticsDashboard" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="analyticsPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Real-time Monitoring</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="realtimeMonitoring" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="monitoringPerf" min="1" max="10" value="8">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üì° Real-Time Targeting</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setRealtimeTarget('all')">‚ö° All Real-Time Data</button>
                        <button class="target-btn" onclick="setRealtimeTarget('threats')">üö® Threat Updates Only</button>
                        <button class="target-btn" onclick="setRealtimeTarget('crawling')">üï∑Ô∏è Crawling Progress Only</button>
                        <button class="target-btn" onclick="setRealtimeTarget('forensics')">ü§ñ Forensics Results Only</button>
                        <button class="target-btn" onclick="setRealtimeTarget('intelligence')">üéØ Intelligence Updates Only</button>
                        <button class="target-btn" onclick="setRealtimeTarget('system')">‚öôÔ∏è System Metrics Only</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('realtime')">Save Real-Time Settings</button>
            </div>

            <!-- Security Control Panel -->
            <div id="security-panel" class="control-panel" style="display: none;">
                <h3>üõ°Ô∏è Enterprise Security Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Helmet.js Headers</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="helmetHeaders" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="helmetPerf" min="1" max="10" value="10">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Rate Limiting</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="rateLimiting" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="rateLimitPerf" min="1" max="10" value="8">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Input Validation</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="inputValidation" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="inputValidPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Data Sanitization</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dataSanitization" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="dataSanitPerf" min="1" max="10" value="9">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üîê Security Levels</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setSecurityLevel('maximum')">üõ°Ô∏è Maximum Security</button>
                        <button class="target-btn" onclick="setSecurityLevel('high')">üîí High Security</button>
                        <button class="target-btn" onclick="setSecurityLevel('standard')">‚öñÔ∏è Standard Security</button>
                        <button class="target-btn" onclick="setSecurityLevel('minimal')">‚ö†Ô∏è Minimal Security</button>
                        <button class="target-btn" onclick="setSecurityLevel('custom')">üéõÔ∏è Custom Configuration</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('security')">Save Security Settings</button>
            </div>

            <!-- Attack Vectors Control Panel -->
            <div id="attackvectors-panel" class="control-panel" style="display: none;">
                <h3>üéØ Attack Vector Database Control</h3>
                <div class="control-grid">
                    <div class="control-item">
                        <h4>Vector Monitoring</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="vectorMonitoring" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="vectorMonitorPerf" min="1" max="10" value="8">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Real-time Tracking</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="realtimeTracking" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="realtimeTrackPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Threat Analytics</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="threatAnalytics" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="threatAnalyticsPerf" min="1" max="10" value="9">
                        </div>
                    </div>

                    <div class="control-item">
                        <h4>Pattern Analysis</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="patternAnalysis" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="performance-slider">
                            <input type="range" id="patternAnalysisPerf" min="1" max="10" value="8">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üéØ Attack Vector Categories</h3>
                    <div class="targeting-options">
                        <button class="target-btn active" onclick="setAttackVectorTarget('all')">üéØ All Categories</button>
                        <button class="target-btn" onclick="setAttackVectorTarget('ai')">ü§ñ AI Threats</button>
                        <button class="target-btn" onclick="setAttackVectorTarget('malware')">ü¶† Malware</button>
                        <button class="target-btn" onclick="setAttackVectorTarget('social')">üé≠ Social Engineering</button>
                        <button class="target-btn" onclick="setAttackVectorTarget('network')">üåê Network Attacks</button>
                        <button class="target-btn" onclick="setAttackVectorTarget('web')">üï∏Ô∏è Web Applications</button>
                    </div>
                </div>

                <button class="btn" onclick="saveSettings('attackvectors')">Save Attack Vector Settings</button>
            </div>
        </div>

        <!-- Call to Action -->
        <div class="card animate-fade-in animate-delay-3" style="text-align: center;">
            <h3>üéØ Ready for Operation</h3>
            <p>BLOOMCRAWLER RIIS is fully operational and ready to conduct advanced cyber intelligence operations</p>
            <div style="margin-top: 30px;">
                <button class="btn" onclick="alert('üöÄ BLOOMCRAWLER RIIS is ACTIVE and OPERATIONAL!')">Activate Intelligence</button>
                <button class="btn btn-secondary" style="margin-left: 20px;" onclick="alert('üõ°Ô∏è All systems running in stealth mode')">Check Status</button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer animate-fade-in">
            <p>üî• BLOOMCRAWLER RIIS - Ultimate Cyber Intelligence Platform</p>
            <p style="margin-top: 10px; color: var(--primary); font-weight: bold;">
                üõ°Ô∏è Advanced ‚Ä¢ Undetectable ‚Ä¢ Real-Time ‚Ä¢ Enterprise-Grade
            </p>
            <p style="margin-top: 20px; font-size: 0.8rem; color: #7f8c8d;">
                Built with advanced AI, machine learning, and cyber security expertise
            </p>
        </footer>
    </div>

    <script>
        // Global settings storage
        let systemSettings = {
            intelligence: {
                bloomEngine: true,
                threatDetection: true,
                predictiveAnalytics: true,
                soarAutomation: true,
                bloomPerf: 10,
                threatPerf: 10,
                predictivePerf: 10,
                soarPerf: 10,
                target: 'global'
            },
            stealth: {
                userAgentRotation: true,
                requestDelays: true,
                sessionManagement: true,
                antiDetection: true,
                referrerSim: true,
                behavioralMimicry: true,
                patternEvasion: true,
                errorRecovery: true,
                userAgentPerf: 10,
                delayPerf: 10,
                sessionPerf: 10,
                antiDetectPerf: 10
            },
            forensics: {
                stableDiffusion: true,
                dalleAnalysis: true,
                midjourneyDetect: true,
                llmTracing: true,
                stableDiffPerf: 10,
                dallePerf: 9,
                midjourneyPerf: 9,
                llmPerf: 9,
                target: 'all'
            },
            darkweb: {
                torCrawling: true,
                i2pCrawling: true,
                freenetMonitoring: false,
                marketplaceSurv: true,
                torPerf: 9,
                i2pPerf: 9,
                freenetPerf: 8,
                marketPerf: 9,
                target: 'comprehensive'
            },
            metadata: {
                contactExtraction: true,
                techDetection: true,
                securityAnalysis: true,
                geolocationExt: true,
                contactPerf: 9,
                techPerf: 10,
                securityPerf: 9,
                geoPerf: 9,
                target: 'comprehensive'
            },
            ipintel: {
                geoAnalysis: true,
                threatScoring: true,
                domainCorrelation: true,
                serviceProviderTrack: true,
                tcpInspection: true,
                udpAnalysis: false,
                metadataCapture: true,
                protocolAnalysis: true,
                geoAnalysisPerf: 9,
                threatScorePerf: 9,
                domainCorrPerf: 9,
                serviceProvPerf: 9,
                target: 'global'
            },
            realtime: {
                websocketStreaming: true,
                liveUpdates: true,
                analyticsDashboard: true,
                realtimeMonitoring: true,
                websocketPerf: 9,
                liveUpdatePerf: 9,
                analyticsPerf: 9,
                monitoringPerf: 9,
                target: 'all'
            },
            security: {
                helmetHeaders: true,
                rateLimiting: true,
                inputValidation: true,
                dataSanitization: true,
                helmetPerf: 10,
                rateLimitPerf: 9,
                inputValidPerf: 9,
                dataSanitPerf: 9,
                level: 'maximum'
            },
            attackvectors: {
                vectorMonitoring: true,
                realtimeTracking: true,
                threatAnalytics: true,
                patternAnalysis: true,
                vectorMonitorPerf: 9,
                realtimeTrackPerf: 9,
                threatAnalyticsPerf: 9,
                patternAnalysisPerf: 9,
                target: 'all'
            },
            global: {
                masterPower: true,
                stealthMode: true,
                globalPerformance: 9,
                autoScaling: true
            }
        };

        // Control panel functions
        function showControlPanel(type) {
            // Hide all panels
            document.querySelectorAll('.control-panel').forEach(panel => {
                panel.style.display = 'none';
            });

            // Show the selected panel
            const panel = document.getElementById(type + '-panel');
            if (panel) {
                panel.style.display = 'block';
                panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // Load current settings
            loadPanelSettings(type);
        }

        function loadPanelSettings(type) {
            const settings = systemSettings[type];
            if (!settings) return;

            // Load toggle switches
            Object.keys(settings).forEach(key => {
                const element = document.getElementById(key);
                if (element && element.type === 'checkbox') {
                    element.checked = settings[key];
                }
            });

            // Load performance sliders
            Object.keys(settings).forEach(key => {
                if (key.includes('Perf') || key.includes('Performance')) {
                    const element = document.getElementById(key.replace('Perf', ''));
                    if (element && element.type === 'range') {
                        element.value = settings[key];
                    }
                }
            });

            // Load targeting buttons
            if (settings.target) {
                document.querySelectorAll(`[onclick*="${type}Target"]`).forEach(btn => {
                    btn.classList.remove('active');
                });
                const activeBtn = document.querySelector(`[onclick*="${type}Target('${settings.target}')"]`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }
            }
        }

        function saveSettings(type) {
            const settings = systemSettings[type];
            if (!settings) return;

            // Save toggle switches
            Object.keys(settings).forEach(key => {
                const element = document.getElementById(key);
                if (element && element.type === 'checkbox') {
                    settings[key] = element.checked;
                }
            });

            // Save performance sliders
            Object.keys(settings).forEach(key => {
                if (key.includes('Perf') || key.includes('Performance')) {
                    const element = document.getElementById(key.replace('Perf', ''));
                    if (element && element.type === 'range') {
                        settings[key] = parseInt(element.value);
                    }
                }
            });

            alert(`‚úÖ ${type.charAt(0).toUpperCase() + type.slice(1)} settings saved successfully!`);
            console.log(`Settings saved for ${type}:`, settings);
        }

        // Targeting functions
        function setTarget(target) {
            systemSettings.intelligence.target = target;
            document.querySelectorAll('[onclick*="setTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setForensicsTarget(target) {
            systemSettings.forensics.target = target;
            document.querySelectorAll('[onclick*="setForensicsTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setDarkWebTarget(target) {
            systemSettings.darkweb.target = target;
            document.querySelectorAll('[onclick*="setDarkWebTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setMetadataTarget(target) {
            systemSettings.metadata.target = target;
            document.querySelectorAll('[onclick*="setMetadataTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setIPTarget(target) {
            systemSettings.ipintel.target = target;
            document.querySelectorAll('[onclick*="setIPTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setRealtimeTarget(target) {
            systemSettings.realtime.target = target;
            document.querySelectorAll('[onclick*="setRealtimeTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setSecurityLevel(level) {
            systemSettings.security.level = level;
            document.querySelectorAll('[onclick*="setSecurityLevel"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setAttackVectorTarget(target) {
            systemSettings.attackvectors.target = target;
            document.querySelectorAll('[onclick*="setAttackVectorTarget"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Global controls
        function toggleGlobalControls() {
            const panel = document.getElementById('globalControls');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        function applyGlobalSettings() {
            systemSettings.global.masterPower = document.getElementById('masterPower').checked;
            systemSettings.global.stealthMode = document.getElementById('stealthMode').checked;
            systemSettings.global.globalPerformance = parseInt(document.getElementById('globalPerformance').value);
            systemSettings.global.autoScaling = document.getElementById('autoScaling').checked;

            // Update performance value display
            document.getElementById('globalPerfValue').textContent = systemSettings.global.globalPerformance;

            alert('üéõÔ∏è Global settings applied successfully!');
            console.log('Global settings applied:', systemSettings.global);
        }

        // Update performance value display
        document.getElementById('globalPerformance').addEventListener('input', function() {
            document.getElementById('globalPerfValue').textContent = this.value;
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Animate progress bars on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.width = entry.target.dataset.width || '95%';
                    }
                });
            }, observerOptions);

            // Observe all progress fills
            document.querySelectorAll('.progress-fill').forEach(fill => {
                observer.observe(fill);
            });

            // Add glow effects on hover
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.classList.add('glow-primary');
                });
                card.addEventListener('mouseleave', function() {
                    this.classList.remove('glow-primary');
                });
            });

            // Make all cards with "Configure ‚Üí" clickable
            document.querySelectorAll('.card').forEach(card => {
                if (card.textContent.includes('Configure ‚Üí')) {
                    card.style.cursor = 'pointer';
                    card.addEventListener('click', function() {
                        const icon = this.querySelector('.card-icon');
                        if (icon) {
                            if (icon.textContent.includes('üéØ')) showControlPanel('intelligence');
                            else if (icon.textContent.includes('üïµÔ∏è‚Äç‚ôÇÔ∏è')) showControlPanel('stealth');
                            else if (icon.textContent.includes('ü§ñ')) showControlPanel('forensics');
                            else if (icon.textContent.includes('üåë')) showControlPanel('darkweb');
                            else if (icon.textContent.includes('üìä')) showControlPanel('metadata');
                            else if (icon.textContent.includes('üåê')) showControlPanel('ipintel');
                            else if (icon.textContent.includes('‚ö°')) showControlPanel('realtime');
                            else if (icon.textContent.includes('üõ°Ô∏è')) showControlPanel('security');
                            else if (icon.textContent.includes('üéØ')) showControlPanel('attackvectors');
                        }
                    });
                }
            });

            // Real-time data fetching and updates
        async function fetchLiveStats() {
            try {
                console.log('üîÑ Fetching live stats from backend...');

                // Fetch crawler stats
                const crawlerResponse = await fetch('http://localhost:5000/api/crawler/stats');
                if (crawlerResponse.ok) {
                    const crawlerData = await crawlerResponse.json();
                    console.log('Crawler stats:', crawlerData);
                    updateCrawlerStats(crawlerData.data);
                } else {
                    console.error('Failed to fetch crawler stats:', crawlerResponse.status);
                }

                // Fetch threat intelligence
                const threatResponse = await fetch('http://localhost:5000/api/threats/live');
                if (threatResponse.ok) {
                    const threatData = await threatResponse.json();
                    console.log('Threat stats:', threatData);
                    updateThreatStats(threatData.data);
                } else {
                    console.error('Failed to fetch threat stats:', threatResponse.status);
                }

                // Fetch bloom stats
                const bloomResponse = await fetch('http://localhost:5000/api/bloom/stats');
                if (bloomResponse.ok) {
                    const bloomData = await bloomResponse.json();
                    console.log('Bloom stats:', bloomData);
                    updateBloomStats(bloomData.data);
                } else {
                    console.error('Failed to fetch bloom stats:', bloomResponse.status);
                }
            } catch (error) {
                console.error('Error fetching live stats:', error);
            }
        }

        function updateCrawlerStats(data) {
            // Update crawler stats in the UI
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards[0]) statCards[0].querySelector('.stat-number').textContent = data.activeCrawls || 0;
            if (statCards[1]) statCards[1].querySelector('.stat-number').textContent = data.totalTargets || 0;
            if (statCards[2]) statCards[2].querySelector('.stat-number').textContent = data.itemsProcessed || 0;
        }

        function updateThreatStats(data) {
            // Update threat stats
            const threatCount = data.totalThreatsDetected || 0;
            const criticalCount = data.threatIntelligence?.criticalThreats || 0;

            // Update threat-related displays
            updateThreatDisplay(threatCount, criticalCount);
        }

        function updateBloomStats(data) {
            // Update bloom seed stats
            const activeSeeds = data.activeSeeds || 0;
            const totalActivations = data.totalActivations || 0;

            // Update bloom displays
            updateBloomDisplay(activeSeeds, totalActivations);
        }

        function updateThreatDisplay(threatCount, criticalCount) {
            // Update threat indicators in the UI
            const threatElements = document.querySelectorAll('.threat-count');
            threatElements.forEach(el => el.textContent = threatCount);

            const criticalElements = document.querySelectorAll('.critical-count');
            criticalElements.forEach(el => el.textContent = criticalCount);
        }

        function updateBloomDisplay(activeSeeds, totalActivations) {
            // Update bloom indicators
            const seedElements = document.querySelectorAll('.active-seeds');
            seedElements.forEach(el => el.textContent = activeSeeds);

            const activationElements = document.querySelectorAll('.total-activations');
            activationElements.forEach(el => el.textContent = totalActivations);
        }

        // Live log streaming
        let logContainer = null;
        let isLogStreaming = false;

        function startLogStreaming() {
            if (isLogStreaming && logContainer && logContainer.style.display === 'block') {
                // Toggle off if already streaming and visible
                logContainer.style.display = 'none';
                return;
            }

            logContainer = document.getElementById('liveLogs');

            if (!logContainer) {
                // Create log container if it doesn't exist
                const logsDiv = document.createElement('div');
                logsDiv.id = 'liveLogs';
                logsDiv.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    width: 500px;
                    max-height: 400px;
                    background: rgba(26, 32, 44, 0.95);
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 15px;
                    padding: 15px;
                    overflow-y: auto;
                    font-family: 'Courier New', monospace;
                    font-size: 11px;
                    z-index: 10000;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
                    display: none;
                `;

                // Add header with close button
                const header = document.createElement('div');
                header.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                    padding-bottom: 10px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                `;
                header.innerHTML = `
                    <h3 style="margin: 0; color: var(--light); font-size: 14px;">üìã Live System Logs</h3>
                    <button id="closeLogsBtn" style="
                        background: transparent;
                        border: none;
                        color: var(--light);
                        cursor: pointer;
                        font-size: 18px;
                        padding: 0;
                        width: 25px;
                        height: 25px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 4px;
                    ">√ó</button>
                `;

                const logContent = document.createElement('div');
                logContent.id = 'logContent';
                logContent.style.cssText = `
                    max-height: 350px;
                    overflow-y: auto;
                `;

                logsDiv.appendChild(header);
                logsDiv.appendChild(logContent);
                document.body.appendChild(logsDiv);
                logContainer = logsDiv;

                // Add close button handler
                const closeBtn = document.getElementById('closeLogsBtn');
                if (closeBtn) {
                    closeBtn.onclick = function() {
                        logContainer.style.display = 'none';
                    };
                    closeBtn.onmouseover = function() {
                        this.style.background = 'rgba(255, 255, 255, 0.1)';
                    };
                    closeBtn.onmouseout = function() {
                        this.style.background = 'transparent';
                    };
                }
            }

            // Show logs
            logContainer.style.display = 'block';
            isLogStreaming = true;

            // Poll for logs every 2 seconds
            if (!window.logPollInterval) {
                window.logPollInterval = setInterval(() => {
                    if (logContainer && logContainer.style.display === 'block') {
                        fetchLiveLogs();
                    }
                }, 2000);
            }
        }

        async function fetchLiveLogs() {
            if (!logContainer) return;

            const logContent = document.getElementById('logContent');
            if (!logContent) return;

            try {
                const timestamp = new Date().toLocaleTimeString();

                // Try to fetch real logs from backend, fallback to simulated
                let logMessages = [];
                
                try {
                    const crawlerRes = await fetch('http://localhost:5000/api/crawler/stats');
                    const threatRes = await fetch('http://localhost:5000/api/threats/live');
                    const bloomRes = await fetch('http://localhost:5000/api/bloom/stats');

                    if (crawlerRes.ok) {
                        const crawlerData = await crawlerRes.json();
                        logMessages.push(`[${timestamp}] [CRAWLER] Active: ${crawlerData.data?.activeCrawls || 0}, Processed: ${crawlerData.data?.itemsProcessed || 0}`);
                    }

                    if (threatRes.ok) {
                        const threatData = await threatRes.json();
                        logMessages.push(`[${timestamp}] [THREAT] Total detected: ${threatData.data?.totalThreatsDetected || 0}`);
                    }

                    if (bloomRes.ok) {
                        const bloomData = await bloomRes.json();
                        logMessages.push(`[${timestamp}] [BLOOM] Active seeds: ${bloomData.data?.activeSeeds || 0}, Activations: ${bloomData.data?.totalActivations || 0}`);
                    }
                } catch (apiError) {
                    // Fallback to simulated logs if API fails
                    logMessages = [
                        `[${timestamp}] [CRAWLER] Processing targets...`,
                        `[${timestamp}] [THREAT] Scanning for threats...`,
                        `[${timestamp}] [BLOOM] Monitoring seed activity...`,
                        `[${timestamp}] [SYSTEM] All systems operational...`
                    ];
                }

                if (logMessages.length > 0) {
                    // Add log entry to content div
                    const logEntry = document.createElement('div');
                    logEntry.textContent = logMessages[0];
                    logEntry.style.cssText = `
                        margin-bottom: 5px;
                        padding: 5px;
                        border-bottom: 1px solid rgba(255,255,255,0.1);
                        color: #a0aec0;
                        font-size: 11px;
                        word-break: break-all;
                        line-height: 1.4;
                    `;

                    logContent.appendChild(logEntry);

                    // Keep only last 50 entries
                    while (logContent.children.length > 50) {
                        logContent.removeChild(logContent.firstChild);
                    }

                    // Auto-scroll to bottom
                    logContent.scrollTop = logContent.scrollHeight;
                }

            } catch (error) {
                console.error('Error fetching logs:', error);
                // Show error in log container
                if (logContent) {
                    const errorEntry = document.createElement('div');
                    errorEntry.textContent = `[${new Date().toLocaleTimeString()}] [ERROR] ${error.message}`;
                    errorEntry.style.cssText = `color: #e53e3e; padding: 5px; font-size: 11px;`;
                    logContent.appendChild(errorEntry);
                }
            }
        }

        // Targeting system
        let currentTargetMode = 'broad';

        function setTargetMode(mode) {
            currentTargetMode = mode;

            // Update UI indicators
            const broadBtn = document.getElementById('broadTargetBtn');
            const specificBtn = document.getElementById('specificTargetBtn');

            if (broadBtn && specificBtn) {
                broadBtn.style.background = mode === 'broad' ? 'linear-gradient(45deg, var(--primary), var(--secondary))' : 'rgba(255, 255, 255, 0.1)';
                specificBtn.style.background = mode === 'specific' ? 'linear-gradient(45deg, var(--primary), var(--secondary))' : 'rgba(255, 255, 255, 0.1)';
            }

            console.log(`Target mode set to: ${mode}`);
        }

        async function executeTargetedAttack() {
            const targetInput = document.getElementById('targetInput');
            const target = targetInput ? targetInput.value.trim() : '';

            if (currentTargetMode === 'specific' && !target) {
                alert('Please enter a target for specific attack mode');
                return;
            }

            try {
                // Execute attack based on mode
                if (currentTargetMode === 'broad') {
                    // Broad attack - start crawler on all networks
                    console.log('üöÄ Executing broad attack across all targets');
                    
                    const response = await fetch('http://localhost:5000/api/crawler/stats');
                    if (response.ok) {
                        const data = await response.json();
                        alert('üöÄ Executing broad attack across all intelligence sources!\n\n' +
                              `‚úÖ Active crawls: ${data.data?.activeCrawls || 0}\n` +
                              `‚úÖ Targets processed: ${data.data?.itemsProcessed || 0}\n\n` +
                              'Targeting: All networks, social media, dark web, surface web');
                        
                        // Add log entry
                        const logContent = document.getElementById('logContent');
                        if (logContent) {
                            const logEntry = document.createElement('div');
                            logEntry.textContent = `[${new Date().toLocaleTimeString()}] [ATTACK] Broad attack initiated - all networks`;
                            logEntry.style.cssText = `color: #48bb78; padding: 5px; font-size: 11px;`;
                            logContent.appendChild(logEntry);
                            logContent.scrollTop = logContent.scrollHeight;
                        }
                    } else {
                        alert('‚ùå Failed to start broad attack. Check if server is running.');
                    }
                } else {
                    // Specific attack - target single source
                    console.log(`üéØ Executing targeted attack on: ${target}`);
                    
                    // Try to add target to crawler
                    try {
                        const response = await fetch('http://localhost:5000/api/swarm/add-targets', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                targets: [{
                                    url: target,
                                    type: 'surface',
                                    priority: 10,
                                    depth: 3
                                }]
                            })
                        });

                        if (response.ok) {
                            alert(`üéØ Executing targeted attack on: ${target}\n\n` +
                                  '‚úÖ Target added to crawler queue\n' +
                                  '‚úÖ Intelligence gathering initiated\n\n' +
                                  'Focusing analysis on specific target');
                            
                            // Add log entry
                            const logContent = document.getElementById('logContent');
                            if (logContent) {
                                const logEntry = document.createElement('div');
                                logEntry.textContent = `[${new Date().toLocaleTimeString()}] [ATTACK] Targeted attack on: ${target}`;
                                logEntry.style.cssText = `color: #4299e1; padding: 5px; font-size: 11px;`;
                                logContent.appendChild(logEntry);
                                logContent.scrollTop = logContent.scrollHeight;
                            }
                        } else {
                            const errorText = await response.text();
                            alert(`‚ùå Failed to start targeted attack: ${errorText}`);
                        }
                    } catch (apiError) {
                        alert(`üéØ Targeted attack queued for: ${target}\n\n(Backend connection failed - attack will start when server is online)`);
                    }
                }
            } catch (error) {
                console.error('Error executing attack:', error);
                alert(`‚ùå Error executing attack: ${error.message}`);
            }
        }

        // Initialize live updates
        setInterval(fetchLiveStats, 3000); // Update every 3 seconds

        // Test API connectivity on load
        function initDashboard() {
            console.log('üî• BLOOMCRAWLER RIIS Dashboard initializing...');

            // Add targeting controls immediately if header exists
            if (document.querySelector('.header')) {
                addTargetingControls();
            } else {
                // Wait a bit and try again if header not ready
                setTimeout(() => {
                    if (document.querySelector('.header') && !document.getElementById('targetingControls')) {
                        addTargetingControls();
                    }
                }, 100);
            }

            // Test API endpoints
            fetch('http://localhost:5000/health').then(response => {
                if (response.ok) {
                    console.log('‚úÖ Backend API connection successful');
                } else {
                    console.error('‚ùå Backend API connection failed');
                }
            }).catch(error => {
                console.error('‚ùå Cannot connect to backend:', error);
            });

            // Initialize button states
            initializeButtons();
        }

        // Initialize when DOM is ready or immediately if already loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initDashboard);
        } else {
            // DOM already loaded
            initDashboard();
        }

        // Add targeting controls to the header
        function addTargetingControls() {
            const headerElement = document.querySelector('.header');
            if (!headerElement) return;

            const targetingControls = document.createElement('div');
            targetingControls.id = 'targetingControls';
            targetingControls.style.cssText = `
                display: flex;
                gap: 15px;
                align-items: center;
                margin-top: 20px;
                flex-wrap: wrap;
            `;

            targetingControls.innerHTML = `
                <div style="display: flex; gap: 10px;">
                    <button id="broadTargetBtn" style="
                        padding: 10px 20px;
                        background: linear-gradient(45deg, var(--primary), var(--secondary));
                        border: none;
                        border-radius: 8px;
                        color: white;
                        cursor: pointer;
                        font-weight: 600;
                    ">üåê Broad Attack</button>

                    <button id="specificTargetBtn" style="
                        padding: 10px 20px;
                        background: rgba(255, 255, 255, 0.1);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        border-radius: 8px;
                        color: var(--light);
                        cursor: pointer;
                        font-weight: 600;
                    ">üéØ Specific Target</button>
                </div>

                <input type="text" id="targetInput" placeholder="Enter target (URL, domain, IP, etc.)" style="
                    padding: 10px 15px;
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 8px;
                    color: var(--light);
                    width: 300px;
                    display: none;
                ">

                <button id="executeAttackBtn" style="
                    padding: 10px 20px;
                    background: linear-gradient(45deg, #e53e3e, #c53030);
                    border: none;
                    border-radius: 8px;
                    color: white;
                    cursor: pointer;
                    font-weight: 600;
                ">‚ö° Execute Attack</button>

                <button id="liveLogsBtn" style="
                    padding: 10px 20px;
                    background: linear-gradient(45deg, var(--warning), #dd6b20);
                    border: none;
                    border-radius: 8px;
                    color: white;
                    cursor: pointer;
                    font-weight: 600;
                ">üìã Live Logs</button>

                <button id="exportDataBtn" style="
                    padding: 10px 20px;
                    background: linear-gradient(45deg, var(--success), #38a169);
                    border: none;
                    border-radius: 8px;
                    color: white;
                    cursor: pointer;
                    font-weight: 600;
                ">üìä Export Data</button>

                <a href="data-intelligence-dashboard.html" style="
                    padding: 10px 20px;
                    background: linear-gradient(45deg, var(--info), #4299e1);
                    border: none;
                    border-radius: 8px;
                    color: white;
                    text-decoration: none;
                    font-weight: 600;
                    display: inline-block;
                ">üïµÔ∏è Intelligence Hub</a>
            `;

            headerElement.appendChild(targetingControls);

            // Attach event listeners immediately
            setupButtonHandlers();
        }

        function setupButtonHandlers() {
            console.log('üéõÔ∏è Setting up button handlers...');

            const broadBtn = document.getElementById('broadTargetBtn');
            const specificBtn = document.getElementById('specificTargetBtn');
            const executeBtn = document.getElementById('executeAttackBtn');
            const logsBtn = document.getElementById('liveLogsBtn');
            const exportBtn = document.getElementById('exportDataBtn');
            const targetInput = document.getElementById('targetInput');

            if (broadBtn) {
                broadBtn.onclick = function() {
                    setTargetMode('broad');
                    if (targetInput) targetInput.style.display = 'none';
                };
                console.log('‚úÖ Broad attack button handler attached');
            }

            if (specificBtn) {
                specificBtn.onclick = function() {
                    setTargetMode('specific');
                    if (targetInput) targetInput.style.display = 'block';
                };
                console.log('‚úÖ Specific target button handler attached');
            }

            if (executeBtn) {
                executeBtn.onclick = function() {
                    executeTargetedAttack();
                };
                console.log('‚úÖ Execute attack button handler attached');
            }

            if (logsBtn) {
                logsBtn.onclick = function() {
                    startLogStreaming();
                };
                console.log('‚úÖ Live logs button handler attached');
            }

            if (exportBtn) {
                exportBtn.onclick = function() {
                    exportAllData();
                };
                console.log('‚úÖ Export data button handler attached');
            }
        }

        function initializeButtons() {
            console.log('üéõÔ∏è Initializing dashboard buttons...');
            
            // Add targeting controls if they don't exist
            if (!document.getElementById('targetingControls')) {
                addTargetingControls();
            } else {
                setupButtonHandlers();
            }

            // Test button functionality
            setTimeout(() => {
                console.log('üß™ Testing button functionality...');
                fetchLiveStats(); // Test API call
            }, 1000);
        }

        function exportAllData() {
            // Create comprehensive data export
            const exportData = {
                timestamp: new Date().toISOString(),
                system: 'BLOOMCRAWLER RIIS',
                version: 'ULTIMATE_FULL',
                data: {
                    crawler: null,
                    threats: null,
                    bloom: null,
                    forensics: null,
                    intelligence: null
                },
                logs: [],
                summary: {
                    totalTargets: 0,
                    threatsDetected: 0,
                    dataPoints: 0,
                    bloomActivations: 0
                }
            };

            // Fetch all data
            Promise.all([
                fetch('http://localhost:5000/api/crawler/stats').then(r => r.json()).catch(() => null),
                fetch('http://localhost:5000/api/threats/live').then(r => r.json()).catch(() => null),
                fetch('http://localhost:5000/api/bloom/stats').then(r => r.json()).catch(() => null),
                fetch('http://localhost:5000/api/forensics/images').then(r => r.json()).catch(() => null),
                fetch('http://localhost:5000/api/intelligence/ip').then(r => r.json()).catch(() => null)
            ]).then(([crawler, threats, bloom, forensics, intelligence]) => {
                exportData.data.crawler = crawler?.data || null;
                exportData.data.threats = threats?.data || null;
                exportData.data.bloom = bloom?.data || null;
                exportData.data.forensics = forensics?.data || null;
                exportData.data.intelligence = intelligence?.data || null;

                // Generate summary
                exportData.summary.totalTargets = crawler?.data?.totalTargets || 0;
                exportData.summary.threatsDetected = threats?.data?.totalThreatsDetected || 0;
                exportData.summary.dataPoints = (forensics?.data?.length || 0) + (intelligence?.data?.length || 0);
                exportData.summary.bloomActivations = bloom?.data?.totalActivations || 0;

                // Sample logs
                exportData.logs = [
                    `[${new Date().toISOString()}] System export initiated`,
                    `[${new Date().toISOString()}] Crawled ${exportData.summary.totalTargets} targets`,
                    `[${new Date().toISOString()}] Detected ${exportData.summary.threatsDetected} threats`,
                    `[${new Date().toISOString()}] Collected ${exportData.summary.dataPoints} intelligence points`,
                    `[${new Date().toISOString()}] ${exportData.summary.bloomActivations} bloom activations`
                ];

                // Download as JSON
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `bloomcrawler-export-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                alert('‚úÖ Complete intelligence data exported!\n\nFile: bloomcrawler-export-[date].json\n\nContains all crawler data, threats, forensics, intelligence, and system logs.');
            }).catch(error => {
                console.error('Export error:', error);
                alert('‚ùå Error exporting data. Check console for details.');
            });
        }

            console.log('üî• BLOOMCRAWLER RIIS Dashboard Loaded');
            console.log('üõ°Ô∏è All systems operational and undetectable');
            console.log('üéõÔ∏è Advanced control panels ready for configuration');
            console.log('üåê Initializing real-time monitoring systems...');

            // Initialize living container system
            initializeLivingContainerSystem();

            // Initialize webhook management system
            initializeWebhookSystem();

            // Show loading message in activity log
            addActivityLogEntry({
                type: 'info',
                message: 'üî• BLOOMCRAWLER RIIS Master Control Dashboard initialized',
                timestamp: new Date().toISOString()
            });

            addActivityLogEntry({
                type: 'info',
                message: 'üåê Connecting to WebSocket server...',
                timestamp: new Date().toISOString()
            });

            // Initialize WebSocket connection for live updates
            initializeWebSocket();

                // Also fetch initial stats via REST API (as fallback)
            setTimeout(() => {
                fetchInitialStats();
            }, 2000);

            // Periodically fetch stats as fallback (every 15 seconds)
            setInterval(() => {
                fetchInitialStats();
            }, 15000);

            // Show welcome message
            setTimeout(() => {
                addActivityLogEntry({
                    type: 'success',
                    message: 'üéØ Autonomous cyber intelligence system ready for operation',
                    timestamp: new Date().toISOString()
                });
            }, 1000);
        });

        // ============================================
        // LIVING CONTAINER SYSTEM FUNCTIONS
        // ============================================

        let activeContainers = [];
        let containerViewMode = 'single'; // 'single' or 'grid'

        function initializeLivingContainerSystem() {
            console.log('üåê Initializing Living Container System...');

            // Load default dashboard
            loadSubPage('dashboard');

            // Update active containers count
            updateActiveContainersCount();
        }

        function loadSubPage(pageName) {
            console.log(`üìÑ Loading sub-page: ${pageName}`);

            // Update navigation tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageName}"]`).classList.add('active');

            // Show loading
            const contentArea = document.getElementById('container-content-area');
            const loading = document.getElementById('container-loading');
            loading.style.display = 'block';

            // Hide all existing pages
            document.querySelectorAll('.container-page').forEach(page => {
                page.classList.remove('active');
            });

            // Check if page already exists
            let pageElement = document.getElementById(`${pageName}-page`);

            if (!pageElement) {
                // Create new page container
                pageElement = document.createElement('div');
                pageElement.id = `${pageName}-page`;
                pageElement.className = 'container-page';
                contentArea.appendChild(pageElement);

                // Load page content dynamically
                loadPageContent(pageName, pageElement);
            } else {
                // Page already exists, just show it
                setTimeout(() => {
                    loading.style.display = 'none';
                    pageElement.classList.add('active');
                }, 300);
            }
        }

        async function loadPageContent(pageName, container) {
            try {
                // Simulate loading different page content
                let content = '';

                switch(pageName) {
                    case 'dashboard':
                        content = generateDashboardContent();
                        break;
                    case 'threat-detection':
                        content = generateThreatDetectionContent();
                        break;
                    case 'crawler-control':
                        content = generateCrawlerControlContent();
                        break;
                    case 'forensics':
                        content = generateForensicsContent();
                        break;
                    case 'intelligence':
                        content = generateIntelligenceContent();
                        break;
                    case 'webhooks':
                        content = generateWebhooksContent();
                        break;
                    case 'analytics':
                        content = generateAnalyticsContent();
                        break;
                    case 'verification':
                        content = generateVerificationContent();
                        break;
                    case 'settings':
                        content = generateSettingsContent();
                        break;
                    default:
                        content = '<h3>Page not found</h3><p>This page is not available.</p>';
                }

                container.innerHTML = content;

                // Add to active containers
                if (!activeContainers.includes(pageName)) {
                    activeContainers.push(pageName);
                    updateActiveContainersCount();
                }

                // Hide loading
                setTimeout(() => {
                    document.getElementById('container-loading').style.display = 'none';
                    container.classList.add('active');
                }, 500);

            } catch (error) {
                console.error('Error loading page content:', error);
                container.innerHTML = '<h3>Error</h3><p>Failed to load page content.</p>';
                document.getElementById('container-loading').style.display = 'none';
            }
        }

        function generateDashboardContent() {
            return `
                <h3 style="color: var(--primary); margin-bottom: 20px;">üè† Main Dashboard</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Welcome to the living container system. All BLOOMCRAWLER RIIS operations are monitored here.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üåê</div>
                        <div style="color: var(--secondary); font-weight: bold; font-size: 1.2rem;">Containers</div>
                        <div style="color: #bdc3c7; margin-top: 10px;">${activeContainers.length} Active</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üîó</div>
                        <div style="color: var(--secondary); font-weight: bold; font-size: 1.2rem;">Webhooks</div>
                        <div style="color: #bdc3c7; margin-top: 10px;" id="dashboard-webhook-count">0 Active</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üìä</div>
                        <div style="color: var(--secondary); font-weight: bold; font-size: 1.2rem;">Data Points</div>
                        <div style="color: #bdc3c7; margin-top: 10px;">0 Collected</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">‚ö°</div>
                        <div style="color: var(--secondary); font-weight: bold; font-size: 1.2rem;">Operations</div>
                        <div style="color: #bdc3c7; margin-top: 10px;">Running</div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h4 style="color: var(--primary);">Quick Actions</h4>
                    <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                        <button onclick="loadSubPage('threat-detection')" style="padding: 10px 20px; background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; border-radius: 8px; color: #ef4444; cursor: pointer;">üõ°Ô∏è Check Threats</button>
                        <button onclick="loadSubPage('crawler-control')" style="padding: 10px 20px; background: rgba(139, 92, 246, 0.2); border: 1px solid #8b5cf6; border-radius: 8px; color: #8b5cf6; cursor: pointer;">üï∑Ô∏è Control Crawler</button>
                        <button onclick="loadSubPage('webhooks')" style="padding: 10px 20px; background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; border-radius: 8px; color: #22c55e; cursor: pointer;">üîó Manage Webhooks</button>
                        <button onclick="loadSubPage('analytics')" style="padding: 10px 20px; background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; border-radius: 8px; color: #f59e0b; cursor: pointer;">üìä View Analytics</button>
                    </div>
                </div>
            `;
        }

        function generateThreatDetectionContent() {
            return `
                <h3 style="color: var(--danger); margin-bottom: 20px;">üõ°Ô∏è Threat Detection Control</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Monitor and manage real-time threat detection across all networks.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--danger); margin-bottom: 15px;">Threat Statistics</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--danger); font-weight: bold;">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Active Threats</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #f59e0b; font-weight: bold;">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Critical Alerts</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Detection Controls</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">Real-time scanning</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">Deep packet inspection</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">AI anomaly detection</span>
                            </label>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateCrawlerControlContent() {
            return `
                <h3 style="color: var(--accent); margin-bottom: 20px;">üï∑Ô∏è Crawler Control Center</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Manage autonomous crawling operations across surface, dark, and deep web.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(69, 183, 209, 0.1); border: 1px solid rgba(69, 183, 209, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--accent); margin-bottom: 15px;">Crawler Status</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent); font-weight: bold;">üü¢</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Status: Active</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--secondary); font-weight: bold;">15</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Active Workers</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Network Targeting</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">üåê Surface Web</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">üåë Dark Web (TOR)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">üîó Deep Web (I2P)</span>
                            </label>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateForensicsContent() {
            return `
                <h3 style="color: var(--warning); margin-bottom: 20px;">ü§ñ AI Forensics Lab</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Advanced AI-generated content detection and image forensics analysis.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--warning); margin-bottom: 15px;">Detection Engines</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success); font-weight: bold;">‚úÖ</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Stable Diffusion</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success); font-weight: bold;">‚úÖ</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">DALL-E</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Analysis Queue</h4>
                        <div style="text-align: center; color: #6b7280; padding: 40px;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">üîç</div>
                            <div>No images in queue</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Upload images for AI detection analysis</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateIntelligenceContent() {
            return `
                <h3 style="color: var(--info); margin-bottom: 20px;">üéØ Intelligence Hub</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Comprehensive cyber intelligence gathering and analysis center.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--info); margin-bottom: 15px;">Data Collection</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--secondary); font-weight: bold;">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Targets</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent); font-weight: bold;">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Data Points</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Intelligence Sources</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="color: var(--success);">üü¢</span>
                                <span style="color: #bdc3c7;">Social Media Monitoring</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="color: var(--success);">üü¢</span>
                                <span style="color: #bdc3c7;">Dark Web Surveillance</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="color: var(--success);">üü¢</span>
                                <span style="color: #bdc3c7;">IP Intelligence</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateWebhooksContent() {
            return `
                <h3 style="color: var(--success); margin-bottom: 20px;">üîó Webhook Management</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Create and manage self-generating webhooks for real-time notifications.</p>

                <div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h4 style="color: var(--success); margin-bottom: 15px;">Quick Webhook Generator</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <button onclick="quickCreateWebhook('threat-detected')" style="padding: 15px; background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; border-radius: 8px; color: #ef4444; cursor: pointer; font-weight: 600;">
                            üö® Threat Alert Webhook
                        </button>
                        <button onclick="quickCreateWebhook('crawler-activity')" style="padding: 15px; background: rgba(139, 92, 246, 0.2); border: 1px solid #8b5cf6; border-radius: 8px; color: #8b5cf6; cursor: pointer; font-weight: 600;">
                            üï∑Ô∏è Crawler Activity Webhook
                        </button>
                        <button onclick="quickCreateWebhook('data-collected')" style="padding: 15px; background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; border-radius: 8px; color: #3b82f6; cursor: pointer; font-weight: 600;">
                            üìä Data Collection Webhook
                        </button>
                    </div>
                </div>

                <div id="webhooks-page-container">
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üîó</div>
                        <div>No webhooks created yet</div>
                        <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Use the quick generator above or create custom webhooks</div>
                    </div>
                </div>
            `;
        }

        function generateAnalyticsContent() {
            return `
                <h3 style="color: var(--secondary); margin-bottom: 20px;">üìä Analytics Dashboard</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Comprehensive analytics and performance metrics for all BLOOMCRAWLER operations.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(78, 205, 196, 0.1); border: 1px solid rgba(78, 205, 196, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--secondary); margin-bottom: 15px;">Performance Metrics</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--secondary); font-weight: bold;">99.9%</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Uptime</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent); font-weight: bold;">1.2s</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Avg Response</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Data Insights</h4>
                        <div style="text-align: center; color: #6b7280; padding: 40px;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">üìà</div>
                            <div>Analytics engine initializing...</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Real-time data visualization coming soon</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateVerificationContent() {
            return `
                <h3 style="color: var(--info); margin-bottom: 20px;">üî¨ System Verification</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Run comprehensive system verification tests to ensure all BLOOMCRAWLER RIIS components are functioning properly.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--info); margin-bottom: 15px;">Verification Status</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--success); font-weight: bold;" id="verification-passed">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Tests Passed</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: var(--danger); font-weight: bold;" id="verification-failed">0</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">Tests Failed</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px;">
                            <div style="color: #bdc3c7; font-size: 0.9rem;">Success Rate: <span id="verification-rate" style="color: var(--success); font-weight: bold;">0%</span></div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Verification Controls</h4>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="runSystemVerification()" style="padding: 12px 20px; background: var(--info); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                üöÄ Run Full Verification
                            </button>
                            <button onclick="runQuickVerification()" style="padding: 10px 20px; background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; border-radius: 6px; color: #3b82f6; cursor: pointer;">
                                ‚ö° Quick Health Check
                            </button>
                            <button onclick="clearVerificationResults()" style="padding: 10px 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: var(--light); cursor: pointer;">
                                üßπ Clear Results
                            </button>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 20px;">
                    <h4 style="color: var(--primary); margin-bottom: 15px;">Verification Results</h4>
                    <div id="verification-results" style="max-height: 400px; overflow-y: auto; font-family: monospace; font-size: 14px;">
                        <div style="color: #6b7280; text-align: center; padding: 40px;">
                            <div style="font-size: 3rem; margin-bottom: 15px;">üî¨</div>
                            <div>Click "Run Full Verification" to start system testing</div>
                            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">This will test all BLOOMCRAWLER RIIS components</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateSettingsContent() {
            return `
                <h3 style="color: var(--light); margin-bottom: 20px;">‚öôÔ∏è System Settings</h3>
                <p style="color: #bdc3c7; margin-bottom: 20px;">Configure global BLOOMCRAWLER RIIS system parameters and preferences.</p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">General Settings</h4>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">System Name</label>
                                <input type="text" value="BLOOMCRAWLER RIIS" style="width: 100%; padding: 8px 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: var(--light);">
                            </div>
                            <div>
                                <label style="color: #bdc3c7; display: block; margin-bottom: 5px;">Update Interval</label>
                                <select style="width: 100%; padding: 8px 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: var(--light);">
                                    <option value="1000">1 second</option>
                                    <option value="5000" selected>5 seconds</option>
                                    <option value="15000">15 seconds</option>
                                    <option value="30000">30 seconds</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--primary); margin-bottom: 15px;">Security Settings</h4>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">Enable stealth mode</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">Auto-rotate user agents</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" checked style="width: 18px; height: 18px;">
                                <span style="color: #bdc3c7;">Enable rate limiting</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 20px; text-align: center;">
                    <button style="padding: 12px 24px; background: var(--success); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">
                        üíæ Save Settings
                    </button>
                </div>
            `;
        }

        function createNewContainer() {
            const containerName = prompt('Enter container name:');
            if (containerName && containerName.trim()) {
                // Create new container page
                const pageName = containerName.toLowerCase().replace(/\s+/g, '-');
                loadSubPage(pageName);

                addActivityLogEntry({
                    type: 'info',
                    message: `üåê New living container created: ${containerName}`,
                    timestamp: new Date().toISOString()
                });
            }
        }

        function toggleContainerView() {
            const btn = document.getElementById('container-view-btn');
            containerViewMode = containerViewMode === 'single' ? 'grid' : 'single';
            btn.textContent = containerViewMode === 'single' ? 'Grid View' : 'Single View';

            // Update container layout
            const contentArea = document.getElementById('container-content-area');
            if (containerViewMode === 'grid') {
                contentArea.style.display = 'grid';
                contentArea.style.gridTemplateColumns = 'repeat(auto-fit, minmax(400px, 1fr))';
                contentArea.style.gap = '20px';
            } else {
                contentArea.style.display = 'block';
            }
        }

        function updateActiveContainersCount() {
            const countEl = document.getElementById('active-containers-count');
            if (countEl) {
                countEl.textContent = activeContainers.length;
            }
        }

        // ============================================
        // WEBHOOK MANAGEMENT SYSTEM FUNCTIONS
        // ============================================

        let webhooks = [];
        let webhookCounter = 0;

        function initializeWebhookSystem() {
            console.log('üîó Initializing Webhook Management System...');
            loadSavedWebhooks();
            updateWebhookCount();
        }

        function createNewWebhook() {
            const creator = document.getElementById('webhook-creator');
            creator.style.display = creator.style.display === 'none' ? 'block' : 'none';
        }

        function cancelWebhookCreation() {
            document.getElementById('webhook-creator').style.display = 'none';
            clearWebhookForm();
        }

        function clearWebhookForm() {
            document.getElementById('webhook-name').value = '';
            document.getElementById('webhook-event-type').value = 'threat-detected';
            document.getElementById('webhook-url').value = '';
            document.getElementById('webhook-method').value = 'POST';
        }

        function saveWebhook() {
            const name = document.getElementById('webhook-name').value.trim();
            const eventType = document.getElementById('webhook-event-type').value;
            const url = document.getElementById('webhook-url').value.trim();
            const method = document.getElementById('webhook-method').value;

            if (!name || !url) {
                alert('Please fill in all required fields');
                return;
            }

            // Validate URL
            try {
                new URL(url);
            } catch (e) {
                alert('Please enter a valid URL');
                return;
            }

            const webhook = {
                id: ++webhookCounter,
                name: name,
                eventType: eventType,
                url: url,
                method: method,
                created: new Date().toISOString(),
                active: true,
                triggered: 0
            };

            webhooks.push(webhook);
            saveWebhooksToStorage();
            renderWebhooks();
            updateWebhookCount();

            // Hide form and clear
            cancelWebhookCreation();

            addActivityLogEntry({
                type: 'success',
                message: `üîó New webhook created: ${name}`,
                timestamp: new Date().toISOString()
            });
        }

        function quickCreateWebhook(eventType) {
            const names = {
                'threat-detected': 'Threat Alert Webhook',
                'crawler-activity': 'Crawler Activity Webhook',
                'data-collected': 'Data Collection Webhook'
            };

            const webhook = {
                id: ++webhookCounter,
                name: names[eventType],
                eventType: eventType,
                url: 'https://httpbin.org/post', // Demo URL
                method: 'POST',
                created: new Date().toISOString(),
                active: true,
                triggered: 0
            };

            webhooks.push(webhook);
            saveWebhooksToStorage();
            renderWebhooks();
            updateWebhookCount();

            addActivityLogEntry({
                type: 'success',
                message: `üîó Quick webhook created: ${names[eventType]}`,
                timestamp: new Date().toISOString()
            });
        }

        function renderWebhooks() {
            const container = document.getElementById('webhooks-container');
            const pageContainer = document.getElementById('webhooks-page-container');

            if (webhooks.length === 0) {
                const emptyState = `
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üîó</div>
                        <div>No webhooks created yet</div>
                        <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">Click "Create Webhook" to add your first webhook</div>
                    </div>
                `;
                if (container) container.innerHTML = emptyState;
                if (pageContainer) pageContainer.innerHTML = emptyState;
                return;
            }

            const webhookHTML = webhooks.map(webhook => `
                <div class="webhook-item">
                    <div class="webhook-info">
                        <div class="webhook-name">${webhook.name}</div>
                        <div class="webhook-details">
                            ${webhook.method} ${webhook.url}<br>
                            Event: ${webhook.eventType} | Triggered: ${webhook.triggered} times
                        </div>
                    </div>
                    <div class="webhook-actions">
                        <button class="webhook-action-btn webhook-test-btn" onclick="testWebhook(${webhook.id})">üß™ Test</button>
                        <button class="webhook-action-btn webhook-edit-btn" onclick="editWebhook(${webhook.id})">‚úèÔ∏è Edit</button>
                        <button class="webhook-action-btn webhook-delete-btn" onclick="deleteWebhook(${webhook.id})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');

            if (container) container.innerHTML = webhookHTML;
            if (pageContainer) pageContainer.innerHTML = webhookHTML;
        }

        function testWebhook(id) {
            const webhook = webhooks.find(w => w.id === id);
            if (!webhook) return;

            // Test the webhook
            fetch(webhook.url, {
                method: webhook.method,
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    test: true,
                    webhook: webhook.name,
                    timestamp: new Date().toISOString(),
                    event: webhook.eventType
                })
            })
            .then(response => {
                if (response.ok) {
                    webhook.triggered++;
                    saveWebhooksToStorage();
                    renderWebhooks();
                    addActivityLogEntry({
                        type: 'success',
                        message: `üß™ Webhook test successful: ${webhook.name}`,
                        timestamp: new Date().toISOString()
                    });
                } else {
                    addActivityLogEntry({
                        type: 'error',
                        message: `‚ùå Webhook test failed: ${webhook.name} (${response.status})`,
                        timestamp: new Date().toISOString()
                    });
                }
            })
            .catch(error => {
                addActivityLogEntry({
                    type: 'error',
                    message: `‚ùå Webhook test error: ${webhook.name} - ${error.message}`,
                    timestamp: new Date().toISOString()
                });
            });
        }

        function editWebhook(id) {
            const webhook = webhooks.find(w => w.id === id);
            if (!webhook) return;

            // Populate form with webhook data
            document.getElementById('webhook-name').value = webhook.name;
            document.getElementById('webhook-event-type').value = webhook.eventType;
            document.getElementById('webhook-url').value = webhook.url;
            document.getElementById('webhook-method').value = webhook.method;

            // Show form
            document.getElementById('webhook-creator').style.display = 'block';

            // Change save button to update
            const saveBtn = document.querySelector('#webhook-creator button[onclick="saveWebhook()"]');
            saveBtn.textContent = 'üíæ Update Webhook';
            saveBtn.onclick = () => updateWebhook(id);
        }

        function updateWebhook(id) {
            const webhook = webhooks.find(w => w.id === id);
            if (!webhook) return;

            webhook.name = document.getElementById('webhook-name').value.trim();
            webhook.eventType = document.getElementById('webhook-event-type').value;
            webhook.url = document.getElementById('webhook-url').value.trim();
            webhook.method = document.getElementById('webhook-method').value;

            saveWebhooksToStorage();
            renderWebhooks();
            cancelWebhookCreation();

            // Reset save button
            const saveBtn = document.querySelector('#webhook-creator button[onclick*="updateWebhook"]');
            if (saveBtn) {
                saveBtn.textContent = 'üíæ Save Webhook';
                saveBtn.onclick = saveWebhook;
            }

            addActivityLogEntry({
                type: 'info',
                message: `üîó Webhook updated: ${webhook.name}`,
                timestamp: new Date().toISOString()
            });
        }

        function deleteWebhook(id) {
            if (!confirm('Are you sure you want to delete this webhook?')) return;

            const index = webhooks.findIndex(w => w.id === id);
            if (index !== -1) {
                const webhook = webhooks[index];
                webhooks.splice(index, 1);
                saveWebhooksToStorage();
                renderWebhooks();
                updateWebhookCount();

                addActivityLogEntry({
                    type: 'warning',
                    message: `üóëÔ∏è Webhook deleted: ${webhook.name}`,
                    timestamp: new Date().toISOString()
                });
            }
        }

        function testAllWebhooks() {
            if (webhooks.length === 0) {
                alert('No webhooks to test');
                return;
            }

            addActivityLogEntry({
                type: 'info',
                message: `üß™ Testing all ${webhooks.length} webhooks...`,
                timestamp: new Date().toISOString()
            });

            webhooks.forEach(webhook => {
                setTimeout(() => testWebhook(webhook.id), Math.random() * 2000);
            });
        }

        function saveWebhooksToStorage() {
            localStorage.setItem('bloomcrawler-webhooks', JSON.stringify(webhooks));
            localStorage.setItem('bloomcrawler-webhook-counter', webhookCounter.toString());
        }

        function loadSavedWebhooks() {
            const saved = localStorage.getItem('bloomcrawler-webhooks');
            const counter = localStorage.getItem('bloomcrawler-webhook-counter');

            if (saved) {
                webhooks = JSON.parse(saved);
            }

            if (counter) {
                webhookCounter = parseInt(counter);
            }

            renderWebhooks();
        }

        function updateWebhookCount() {
            const count = webhooks.length;
            const countEl = document.getElementById('webhook-count-value');
            const dashboardCountEl = document.getElementById('dashboard-webhook-count');

            if (countEl) countEl.textContent = count;
            if (dashboardCountEl) dashboardCountEl.textContent = count + ' Active';
        }

        // Auto-trigger webhooks based on system events
        function triggerWebhooks(eventType, data) {
            webhooks.filter(w => w.active && w.eventType === eventType).forEach(webhook => {
                fetch(webhook.url, {
                    method: webhook.method,
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        webhook: webhook.name,
                        event: eventType,
                        data: data,
                        timestamp: new Date().toISOString()
                    })
                })
                .then(response => {
                    if (response.ok) {
                        webhook.triggered++;
                        console.log(`üîó Webhook triggered: ${webhook.name}`);
                    }
                })
                .catch(error => {
                    console.error(`Webhook error for ${webhook.name}:`, error);
                });
            });
        }

        // Hook into existing system events
        const originalAddActivityLogEntry = addActivityLogEntry;
        addActivityLogEntry = function(entry) {
            originalAddActivityLogEntry(entry);

            // Trigger webhooks based on log type
            if (entry.type === 'error' && entry.message.includes('threat')) {
                triggerWebhooks('threat-detected', { message: entry.message, level: 'high' });
            } else if (entry.type === 'info' && entry.message.includes('crawler')) {
                triggerWebhooks('crawler-activity', { message: entry.message, activity: 'crawl' });
            } else if (entry.type === 'success' && entry.message.includes('data')) {
                triggerWebhooks('data-collected', { message: entry.message, dataType: 'intelligence' });
            }
        };

        // Fetch initial stats from REST API (fallback when WebSocket fails)
        async function fetchInitialStats() {
            const API_BASE = 'http://localhost:5000/api';

            // Only fetch if WebSocket is not connected
            if (crawlerSocket && crawlerSocket.connected) {
                console.log('WebSocket connected, skipping REST fallback');
                return;
            }
            
            try {
                // Fetch crawler stats
                try {
                    const crawlerRes = await fetch(`${API_BASE}/crawler/stats`, {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    if (crawlerRes.ok) {
                        const crawlerData = await crawlerRes.json();
                        if (crawlerData.success && crawlerData.data) {
                            liveStats.crawler.activeCrawls = crawlerData.data.activeCrawls || 0;
                            liveStats.crawler.totalTargets = crawlerData.data.totalTargets || 0;
                            liveStats.crawler.itemsProcessed = crawlerData.data.itemsProcessed || 0;

                            // Update metadata count if available
                            if (crawlerData.data.imageForensics?.totalAnalyzed) {
                                liveStats.network.metadataCount = crawlerData.data.imageForensics.totalAnalyzed;
                            }
                        }
                    }
                } catch (error) {
                    console.log('REST API crawler stats failed:', error);
                }

                // Fetch threat stats
                try {
                    const threatRes = await fetch(`${API_BASE}/threats/live`, {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    if (threatRes.ok) {
                        const threatData = await threatRes.json();
                        if (threatData.success && threatData.data) {
                            liveStats.threats.detected = threatData.data.totalThreatsDetected || 0;
                            if (threatData.data.threatIntelligence) {
                                liveStats.threats.critical = threatData.data.threatIntelligence.criticalThreats || 0;
                                liveStats.threats.riskScore = threatData.data.threatIntelligence.riskScore || 0;
                            }
                        }
                    }
                } catch (error) {
                    console.log('REST API threat stats failed:', error);
                }

                // Fetch bloom stats
                try {
                    const bloomRes = await fetch(`${API_BASE}/bloom/stats`, {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    if (bloomRes.ok) {
                        const bloomData = await bloomRes.json();
                        if (bloomData.success && bloomData.data) {
                            liveStats.bloom.activeSeeds = bloomData.data.activeSeeds || 0;
                            liveStats.bloom.totalActivations = bloomData.data.totalActivations || 0;
                        }
                    }
                } catch (error) {
                    console.log('REST API bloom stats failed:', error);
                }

                // Fetch swarm stats
                try {
                    const swarmRes = await fetch(`${API_BASE}/swarm/stats`, {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    if (swarmRes.ok) {
                        const swarmData = await swarmRes.json();
                        if (swarmData.success && swarmData.data) {
                            liveStats.swarm.activeWorkers = swarmData.data.workers?.length || 0;
                            liveStats.swarm.itemsFound = swarmData.data.results?.length || 0;
                            liveStats.swarm.status = swarmData.data.isRunning ? 'running' : 'idle';
                        }
                    }
                } catch (error) {
                    console.log('REST API swarm stats failed:', error);
                }

                // Fetch dark web targets
                try {
                    const darkwebRes = await fetch(`${API_BASE}/darkweb/targets`, {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    if (darkwebRes.ok) {
                        const darkwebData = await darkwebRes.json();
                        if (darkwebData.success && darkwebData.data) {
                            liveStats.network.torTargets = darkwebData.data.torTargets || 0;
                            liveStats.network.i2pTargets = darkwebData.data.i2pTargets || 0;
                        }
                    }
                } catch (error) {
                    console.log('REST API darkweb targets failed:', error);
                }

                // Update all stats displays
                updateAllLiveStats();
                
                // Update card stats too
                updateElement('card-active-seeds', liveStats.bloom.activeSeeds);
                updateElement('card-network-targets', liveStats.crawler.totalTargets);
                updateElement('card-workers', liveStats.swarm.activeWorkers);

            } catch (error) {
                console.error('Error fetching initial stats:', error);
                addActivityLogEntry({
                    type: 'warning',
                    message: 'REST API fallback failed - WebSocket required for live updates',
                    timestamp: new Date().toISOString()
                });
            }
        }

        // WebSocket Integration for Live Crawler Activity
        let crawlerSocket = null;
        let crawlerActivityLogs = [];
        const maxLogEntries = 300;

        // Global state for live stats
        let liveStats = {
            crawler: { activeCrawls: 0, totalTargets: 0, itemsProcessed: 0, processingRate: 0 },
            threats: { detected: 0, critical: 0, riskScore: 0 },
            bloom: { activeSeeds: 0, deployments: 0, totalActivations: 0 },
            swarm: { activeWorkers: 0, itemsFound: 0, status: 'idle' },
            network: { torTargets: 0, i2pTargets: 0, metadataCount: 0, ispChecks: 0 }
        };
        let logAutoScroll = true;
        let activityLogEntries = [];

        function initializeWebSocket() {
            console.log('üîå Initializing WebSocket connection...');

            // Try different ports in case the server is running on a different port
            const WS_URLS = [
                'http://localhost:5000',
                'http://localhost:3000',
                'http://localhost:3001',
                'http://localhost:5173'
            ];

            let currentUrlIndex = 0;
            let retryCount = 0;
            const maxRetries = 10;

            function attemptConnection(url) {
                console.log(`üîå Attempting WebSocket connection to: ${url}`);

                try {
                    // Clean up any existing connection
                    if (crawlerSocket) {
                        crawlerSocket.disconnect();
                        crawlerSocket = null;
                    }

                    crawlerSocket = io(url, {
                        transports: ['websocket', 'polling'],
                        timeout: 5000,
                        forceNew: true,
                        reconnection: false, // We'll handle reconnection manually
                        autoConnect: true
                    });

                    crawlerSocket.on('connect', () => {
                        console.log('‚úÖ WebSocket connected - Live crawler feeds enabled');
                        updateWSStatus('connected');
                        updateMasterStatus('üü¢ LIVE & ACTIVE', 'success');

                        // Subscribe to all monitoring channels
                        setTimeout(() => {
                            if (crawlerSocket && crawlerSocket.connected) {
                                crawlerSocket.emit('monitor-crawler');
                                crawlerSocket.emit('monitor-threats');
                                crawlerSocket.emit('monitor-swarm');
                            }
                        }, 500);

                        // Clear connection waiting message
                        clearWaitingMessage();

                        // Start live updates
                        addActivityLogEntry({
                            type: 'success',
                            message: 'WebSocket connection established - Real-time monitoring active',
                            timestamp: new Date().toISOString()
                        });
                    });

                    crawlerSocket.on('disconnect', (reason) => {
                        console.log('‚ùå WebSocket disconnected:', reason);
                        updateWSStatus('disconnected');
                        updateMasterStatus('üî¥ OFFLINE', 'error');

                        addActivityLogEntry({
                            type: 'error',
                            message: `WebSocket disconnected: ${reason}`,
                            timestamp: new Date().toISOString()
                        });

                        // Reset retry count and try to reconnect
                        retryCount = 0;
                        setTimeout(() => {
                            attemptConnection(WS_URLS[currentUrlIndex]);
                        }, 2000);
                    });

                    crawlerSocket.on('connect_error', (error) => {
                        console.error('‚ùå WebSocket connection error:', error);
                        updateWSStatus('error');
                        updateMasterStatus('‚ùå CONNECTION ERROR', 'error');

                        // Try next URL after a short delay
                        currentUrlIndex = (currentUrlIndex + 1) % WS_URLS.length;
                        setTimeout(() => attemptConnection(WS_URLS[currentUrlIndex]), 1500);
                    });

                    crawlerSocket.on('reconnect_attempt', (attempt) => {
                        console.log(`üîÑ WebSocket reconnection attempt ${attempt}`);
                        updateWSStatus('connecting');
                    });

                    // Receive real-time crawler activity
                    crawlerSocket.on('crawler-activity', (activity) => {
                        console.log('üì° Crawler activity:', activity);
                        addCrawlerActivityToLog(activity);
                        updateLiveStatsFromActivity(activity);
                    });

                    // Receive threat updates
                    crawlerSocket.on('threat-update', (data) => {
                        console.log('üö® Threat update:', data);
                        liveStats.threats.detected = data.totalDetected || 0;
                        liveStats.threats.critical = data.threatIntelligence?.criticalThreats || 0;
                        liveStats.threats.riskScore = data.threatIntelligence?.riskScore || 0;
                        updateAllLiveStats();

                        if (data.threat?.severity === 'critical') {
                            addActivityLogEntry({
                                type: 'error',
                                message: `üö® CRITICAL THREAT: ${data.threat.threatName}`,
                                timestamp: new Date().toISOString()
                            });
                        }
                    });

                    // Receive swarm updates
                    crawlerSocket.on('swarm-update', (data) => {
                        console.log('üêú Swarm update:', data);
                        if (data.workers) liveStats.swarm.activeWorkers = Array.isArray(data.workers) ? data.workers.length : data.workers;
                        if (data.results) liveStats.swarm.itemsFound = Array.isArray(data.results) ? data.results.length : data.results;
                        if (data.status) liveStats.swarm.status = data.status;
                        updateAllLiveStats();
                    });

                    // Receive system metrics
                    crawlerSocket.on('system-metrics', (data) => {
                        console.log('üìä System metrics:', data);
                        if (data.type === 'crawler-stats' && data.data) {
                            liveStats.crawler.activeCrawls = data.data.activeCrawls || 0;
                            liveStats.crawler.totalTargets = data.data.totalTargets || 0;
                            liveStats.crawler.itemsProcessed = data.data.itemsProcessed || 0;
                            liveStats.crawler.processingRate = data.performance?.processingRate || 0;

                            // Update network stats
                            if (data.data.torTargets !== undefined) liveStats.network.torTargets = data.data.torTargets;
                            if (data.data.i2pTargets !== undefined) liveStats.network.i2pTargets = data.data.i2pTargets;

                            updateAllLiveStats();
                        }
                    });

                    // Handle system status updates
                    crawlerSocket.on('system-status', (data) => {
                        console.log('‚ö° System status:', data);
                        updateMasterStatus(`üü¢ ${data.status?.toUpperCase() || 'ACTIVE'}`, 'success');
                    });

                } catch (error) {
                    console.error('WebSocket initialization error:', error);
                    updateWSStatus('error');
                    updateMasterStatus('‚ùå INIT ERROR', 'error');

                    // Try next URL on initialization error
                    currentUrlIndex = (currentUrlIndex + 1) % WS_URLS.length;
                    setTimeout(() => attemptConnection(WS_URLS[currentUrlIndex]), 1000);
                }
            }

            // Start with first URL
            attemptConnection(WS_URLS[currentUrlIndex]);
        }

        function clearWaitingMessage() {
            const container = document.getElementById('live-activity-log-container');
            if (container) {
                const waitingMsg = container.querySelector('div');
                if (waitingMsg && waitingMsg.textContent?.includes('Connecting to live crawler feed')) {
                    waitingMsg.remove();
                }
            }
        }
        }

        function updateWSStatus(status) {
            const indicator = document.getElementById('ws-status-indicator');
            const text = document.getElementById('ws-status-text');

            if (!indicator || !text) return;

            switch(status) {
                case 'connected':
                    indicator.style.background = '#10b981';
                    indicator.style.boxShadow = '0 0 10px #10b981';
                    text.textContent = 'LIVE';
                    break;
                case 'disconnected':
                    indicator.style.background = '#ef4444';
                    indicator.style.boxShadow = '0 0 10px #ef4444';
                    text.textContent = 'OFFLINE';
                    break;
                case 'error':
                    indicator.style.background = '#f59e0b';
                    indicator.style.boxShadow = '0 0 10px #f59e0b';
                    text.textContent = 'ERROR';
                    break;
                case 'connecting':
                    indicator.style.background = '#f59e0b';
                    indicator.style.boxShadow = '0 0 10px #f59e0b';
                    text.textContent = 'CONNECTING...';
                    break;
                default:
                    indicator.style.background = '#6b7280';
                    indicator.style.boxShadow = 'none';
                    text.textContent = 'INITIALIZING...';
            }
        }

        function updateMasterStatus(text, type = 'info') {
            const statusEl = document.getElementById('master-status');
            if (statusEl) {
                statusEl.textContent = text;

                // Remove all status classes
                statusEl.classList.remove('status-success', 'status-error', 'status-warning', 'status-info');

                // Add appropriate class
                switch(type) {
                    case 'success':
                        statusEl.classList.add('status-success');
                        break;
                    case 'error':
                        statusEl.classList.add('status-error');
                        break;
                    case 'warning':
                        statusEl.classList.add('status-warning');
                        break;
                    default:
                        statusEl.classList.add('status-info');
                }
            }
        }

        function updateAllLiveStats() {
            // Update crawler stats
            updateElement('live-active-crawls', liveStats.crawler.activeCrawls);
            updateElement('live-total-targets', liveStats.crawler.totalTargets);
            updateElement('live-items-processed', liveStats.crawler.itemsProcessed);
            updateElement('live-processing-rate', liveStats.crawler.processingRate.toFixed(2) + '/s');
            
            // Update threat stats
            updateElement('live-threats-detected', liveStats.threats.detected);
            updateElement('live-critical-threats', liveStats.threats.critical);
            updateElement('live-risk-score', liveStats.threats.riskScore);
            
            // Update bloom stats
            updateElement('live-active-seeds', liveStats.bloom.activeSeeds);
            updateElement('live-deployments', liveStats.bloom.deployments);
            updateElement('live-total-activations', liveStats.bloom.totalActivations);
            
            // Update swarm stats
            updateElement('live-active-workers', liveStats.swarm.activeWorkers);
            updateElement('live-items-found', liveStats.swarm.itemsFound);
            updateElement('live-swarm-status', liveStats.swarm.status === 'running' ? 'Running' : 'Idle');
            
            // Update network stats
            updateElement('live-tor-targets', liveStats.network.torTargets);
            updateElement('live-i2p-targets', liveStats.network.i2pTargets);
            updateElement('live-metadata-count', liveStats.network.metadataCount);
            updateElement('live-isp-checks', liveStats.network.ispChecks);
        }

        function updateElement(id, value) {
            const el = document.getElementById(id);
            if (el) {
                el.textContent = value;
                // Add animation effect
                el.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    el.style.transform = 'scale(1)';
                }, 200);
            }
        }

        function updateLiveStatsFromActivity(activity) {
            // Update stats based on activity type
            switch(activity.type) {
                case 'metadata_sniff':
                    liveStats.network.metadataCount++;
                    break;
                case 'isp_check':
                    liveStats.network.ispChecks++;
                    break;
                case 'deepweb_crawl':
                    if (activity.target?.includes('tor')) liveStats.network.torTargets++;
                    if (activity.target?.includes('i2p')) liveStats.network.i2pTargets++;
                    break;
                case 'bloom_deploy':
                    liveStats.bloom.deployments++;
                    break;
                case 'target_found':
                    if (activity.details) {
                        liveStats.crawler.totalTargets = activity.details.totalTargets || liveStats.crawler.totalTargets;
                        liveStats.crawler.itemsProcessed = activity.details.itemsProcessed || liveStats.crawler.itemsProcessed;
                    }
                    break;
            }
            updateAllLiveStats();
        }

        function addCrawlerActivityToLog(activity) {
            activityLogEntries.unshift({
                ...activity,
                displayTime: new Date(activity.timestamp).toLocaleTimeString(),
                id: activity.id || `log_${Date.now()}_${Math.random().toString(36).substring(7)}`
            });

            // Limit log entries
            if (activityLogEntries.length > maxLogEntries) {
                activityLogEntries = activityLogEntries.slice(0, maxLogEntries);
            }

            // Update log count
            updateLogCount();

            // Update live logs display
            updateLiveActivityLogDisplay();

            // Also add to console for debugging
            const typeIcons = {
                'metadata_sniff': 'üîç',
                'deepweb_crawl': 'üåë',
                'isp_check': 'üì°',
                'bloom_deploy': 'üå∏',
                'target_found': 'üéØ',
                'crawl_start': 'üîÑ',
                'crawl_complete': '‚úÖ',
                'error': '‚ùå'
            };
            console.log(`${typeIcons[activity.type] || 'üìã'} ${activity.message}`);
        }

        function addActivityLogEntry(entry) {
            activityLogEntries.unshift({
                ...entry,
                displayTime: new Date(entry.timestamp || new Date()).toLocaleTimeString(),
                id: entry.id || `log_${Date.now()}_${Math.random().toString(36).substring(7)}`
            });
            
            if (activityLogEntries.length > maxLogEntries) {
                activityLogEntries = activityLogEntries.slice(0, maxLogEntries);
            }
            
            updateLogCount();
            updateLiveActivityLogDisplay();
        }

        function updateLogCount() {
            const countEl = document.getElementById('log-count-value');
            if (countEl) {
                countEl.textContent = activityLogEntries.length;
            }
        }

        function clearActivityLogs() {
            activityLogEntries = [];
            updateLogCount();
            updateLiveActivityLogDisplay();

            addActivityLogEntry({
                type: 'info',
                message: 'üóëÔ∏è Activity logs cleared by user',
                timestamp: new Date().toISOString()
            });

            console.log('Activity logs cleared');
        }

        function exportActivityLogs() {
            const logText = activityLogEntries.map(entry =>
                `[${entry.displayTime}] ${entry.type.toUpperCase()}: ${entry.message}${entry.target ? ` [${entry.target}]` : ''}`
            ).join('\n');

            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bloomcrawler-activity-${new Date().toISOString().split('T')[0]}.log`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            addActivityLogEntry({
                type: 'info',
                message: 'üì§ Activity logs exported to file',
                timestamp: new Date().toISOString()
            });
        }

        function toggleLogAutoScroll() {
            logAutoScroll = !logAutoScroll;
            const btn = document.getElementById('autoscroll-btn');
            if (btn) {
                btn.textContent = `Auto-scroll: ${logAutoScroll ? 'ON' : 'OFF'}`;
                btn.style.background = logAutoScroll ? 'rgba(78, 205, 196, 0.2)' : 'rgba(107, 114, 128, 0.2)';
                btn.style.borderColor = logAutoScroll ? 'var(--secondary)' : '#6b7280';
            }
        }

        function updateLiveActivityLogDisplay() {
            const container = document.getElementById('live-activity-log-container');
            if (!container) return;

            const typeColors = {
                'metadata_sniff': '#60a5fa',
                'deepweb_crawl': '#a78bfa',
                'isp_check': '#22d3ee',
                'bloom_deploy': '#fbbf24',
                'target_found': '#34d399',
                'crawl_start': '#60a5fa',
                'crawl_complete': '#34d399',
                'error': '#f87171',
                'info': '#60a5fa',
                'success': '#34d399',
                'warning': '#fbbf24'
            };

            const typeIcons = {
                'metadata_sniff': 'üîç',
                'deepweb_crawl': 'üåë',
                'isp_check': 'üì°',
                'bloom_deploy': 'üå∏',
                'target_found': 'üéØ',
                'crawl_start': 'üîÑ',
                'crawl_complete': '‚úÖ',
                'error': '‚ùå',
                'info': '‚ÑπÔ∏è',
                'success': '‚úÖ',
                'warning': '‚ö†Ô∏è'
            };

            // Remove waiting message if present
            const waitingMsg = container.querySelector('div[style*="text-align: center"]');
            if (waitingMsg && activityLogEntries.length > 0) {
                waitingMsg.remove();
            }

            // Update log container with latest entries (show last 100)
            const logsToShow = activityLogEntries.slice(0, 100);
            container.innerHTML = logsToShow.map(entry => {
                const color = typeColors[entry.type] || '#9ca3af';
                const icon = typeIcons[entry.type] || 'üìã';
                return `
                    <div style="
                        padding: 8px 12px;
                        margin: 3px 0;
                        border-left: 4px solid ${color};
                        background: rgba(255, 255, 255, 0.05);
                        font-size: 12px;
                        line-height: 1.5;
                        border-radius: 4px;
                        transition: all 0.2s;
                        animation: slideIn 0.3s ease-out;
                    ">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <span style="color: #6b7280; font-size: 11px; min-width: 80px; flex-shrink: 0;">${entry.displayTime}</span>
                            <span style="color: ${color}; font-weight: bold; font-size: 14px; min-width: 25px;">${icon}</span>
                            <span style="color: #e5e7eb; flex: 1;">${entry.message}</span>
                            ${entry.target ? `<span style="color: #6b7280; font-size: 10px; margin-left: 8px; opacity: 0.7;">[${entry.target}]</span>` : ''}
                        </div>
                    </div>
                `;
            }).join('');

            // Auto-scroll to top if enabled
            if (logAutoScroll && container.children.length > 0) {
                container.scrollTop = 0;
            }
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateX(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
        `;
        document.head.appendChild(style);

        function updateLiveLogsDisplay() {
            updateLiveActivityLogDisplay();
        }

        function updateLiveStats(activity) {
            // Update various stat displays based on activity type
            if (activity.type === 'target_found' && activity.details) {
                const statCards = document.querySelectorAll('.stat-card');
                if (statCards[1] && activity.details.totalTargets !== undefined) {
                    statCards[1].querySelector('.stat-number').textContent = activity.details.totalTargets;
                }
                if (statCards[2] && activity.details.itemsProcessed !== undefined) {
                    statCards[2].querySelector('.stat-number').textContent = activity.details.itemsProcessed;
                }
            }
        }

        // ============================================
        // SYSTEM VERIFICATION FUNCTIONS
        // ============================================

        let verificationResults = { passed: 0, failed: 0, total: 0 };

        function runSystemVerification() {
            console.log('üî¨ Starting system verification...');
            resetVerificationResults();

            addVerificationResult('üî¨ BLOOMCRAWLER RIIS - COMPREHENSIVE SYSTEM VERIFICATION', 'info');
            addVerificationResult('========================================================\\n', 'info');

            // Start verification process
            runVerificationPhase1();
        }

        function runQuickVerification() {
            console.log('‚ö° Running quick health check...');
            resetVerificationResults();

            addVerificationResult('‚ö° BLOOMCRAWLER RIIS - QUICK HEALTH CHECK', 'info');
            addVerificationResult('==========================================\\n', 'info');

            // Run basic health checks only
            runQuickHealthCheck();
        }

        function resetVerificationResults() {
            verificationResults = { passed: 0, failed: 0, total: 0 };
            updateVerificationDisplay();
            document.getElementById('verification-results').innerHTML = '';
        }

        function runVerificationPhase1() {
            addVerificationResult('üåê PHASE 1: BACKEND CONNECTIVITY & HEALTH\\n', 'info');

            // Test backend connectivity
            testEndpoint('Backend server connectivity', 'GET', '/health')
                .then(result => {
                    if (result.success) {
                        testEndpoint('Health endpoint response', 'GET', '/health', (data) => data.status === 'healthy')
                            .then(() => {
                                testEndpoint('System identification', 'GET', '/health', (data) => data.system === 'BLOOMCRAWLER RIIS')
                                    .then(() => {
                                        runVerificationPhase2();
                                    });
                            });
                    }
                });
        }

        function runVerificationPhase2() {
            addVerificationResult('\\nüìä PHASE 2: CORE API ENDPOINTS\\n', 'info');

            // Test threat API
            testEndpoint('Threat API connectivity', 'GET', '/api/threats/live')
                .then(() => {
                    testEndpoint('Crawler stats API', 'GET', '/api/crawler/stats')
                        .then(() => {
                            testEndpoint('Dark web targets API', 'GET', '/api/darkweb/targets')
                                .then(() => {
                                    runVerificationPhase3();
                                });
                        });
                });
        }

        function runVerificationPhase3() {
            addVerificationResult('\\nüîç PHASE 3: FORENSICS & LLM DETECTION APIs\\n', 'info');

            testEndpoint('Image forensics API', 'GET', '/api/forensics/images')
                .then(() => {
                    testEndpoint('AI images API', 'GET', '/api/forensics/ai-images')
                        .then(() => {
                            testEndpoint('LLM detections API', 'GET', '/api/forensics/llm-detections')
                                .then(() => {
                                    runVerificationPhase4();
                                });
                        });
                });
        }

        function runVerificationPhase4() {
            addVerificationResult('\\nüï∑Ô∏è PHASE 4: SWARM & ATTACK VECTOR APIs\\n', 'info');

            testEndpoint('Swarm stats API', 'GET', '/api/swarm/stats')
                .then(() => {
                    runVerificationPhase5();
                });
        }

        function runVerificationPhase5() {
            addVerificationResult('\\nüè† PHASE 5: LIVING CONTAINER SYSTEM VERIFICATION\\n', 'info');

            testEndpoint('Container system API', 'GET', '/api/containers/list')
                .then(() => {
                    testEndpoint('Webhook management API', 'GET', '/api/webhooks/list')
                        .then(() => {
                            runVerificationFinal();
                        });
                });
        }

        function runVerificationFinal() {
            addVerificationResult('\\nüèÅ FINAL VERIFICATION RESULTS\\n', 'info');
            addVerificationResult('=============================', 'info');

            const successRate = verificationResults.total > 0 ? ((verificationResults.passed / verificationResults.total) * 100).toFixed(1) : '0';

            addVerificationResult(`‚úÖ Tests Passed: ${verificationResults.passed}/${verificationResults.total} (${successRate}%)`, 'success');
            addVerificationResult(`‚ùå Tests Failed: ${verificationResults.failed}/${verificationResults.total}`, 'error');

            addVerificationResult('\\nüî¨ VERIFICATION SUMMARY:\\n', 'info');

            if (verificationResults.failed === 0) {
                addVerificationResult('üéâ ALL SYSTEMS FULLY OPERATIONAL!', 'success');
                addVerificationResult('\\n‚úÖ BLOOMCRAWLER RIIS VERIFICATION COMPLETE', 'success');
                addVerificationResult('==========================================', 'success');
            } else {
                addVerificationResult('‚ö†Ô∏è  SOME ISSUES DETECTED - REVIEW FAILED TESTS', 'warning');
            }

            updateVerificationDisplay();
        }

        function runQuickHealthCheck() {
            // Quick health check - just test basic connectivity
            testEndpoint('Backend server health', 'GET', '/health')
                .then(result => {
                    if (result.success) {
                        addVerificationResult('‚úÖ BLOOMCRAWLER RIIS is RUNNING and HEALTHY!', 'success');
                        addVerificationResult('\\nüåê Dashboard: http://localhost:5000', 'info');
                        addVerificationResult('üîå WebSocket: Active', 'info');
                        addVerificationResult('üè† Living Containers: Ready', 'info');
                        addVerificationResult('üîó Webhook System: Operational', 'info');
                    } else {
                        addVerificationResult('‚ùå BLOOMCRAWLER RIIS is NOT RESPONDING', 'error');
                        addVerificationResult('\\nüí° Try running the server first', 'warning');
                    }
                    updateVerificationDisplay();
                });
        }

        async function testEndpoint(name, method, endpoint, validator = null) {
            try {
                const response = await fetch(endpoint, { method: method });
                const success = response.ok && (validator ? validator(await response.json()) : true);

                verificationResults.total++;
                if (success) {
                    verificationResults.passed++;
                    addVerificationResult(`‚úÖ PASSED ${name}`, 'success');
                } else {
                    verificationResults.failed++;
                    addVerificationResult(`‚ùå FAILED ${name}`, 'error');
                }

                updateVerificationDisplay();
                return { success, response };

            } catch (error) {
                verificationResults.total++;
                verificationResults.failed++;
                addVerificationResult(`‚ùå FAILED ${name}: ${error.message}`, 'error');
                updateVerificationDisplay();
                return { success: false, error };
            }
        }

        function addVerificationResult(message, level = 'info') {
            const resultsDiv = document.getElementById('verification-results');
            if (!resultsDiv) return;

            const resultEntry = document.createElement('div');
            resultEntry.className = `verification-entry verification-${level}`;
            resultEntry.textContent = message;
            resultEntry.style.cssText = `
                margin: 5px 0;
                padding: 3px 0;
                font-size: 12px;
                white-space: pre-wrap;
            `;

            // Color coding
            switch(level) {
                case 'success':
                    resultEntry.style.color = '#34d399';
                    break;
                case 'error':
                    resultEntry.style.color = '#f87171';
                    break;
                case 'warning':
                    resultEntry.style.color = '#fbbf24';
                    break;
                default:
                    resultEntry.style.color = '#60a5fa';
            }

            resultsDiv.appendChild(resultEntry);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function updateVerificationDisplay() {
            const passedEl = document.getElementById('verification-passed');
            const failedEl = document.getElementById('verification-failed');
            const rateEl = document.getElementById('verification-rate');

            if (passedEl) passedEl.textContent = verificationResults.passed;
            if (failedEl) failedEl.textContent = verificationResults.failed;

            if (rateEl) {
                const rate = verificationResults.total > 0 ? ((verificationResults.passed / verificationResults.total) * 100).toFixed(1) : '0';
                rateEl.textContent = `${rate}%`;
            }
        }

        function clearVerificationResults() {
            resetVerificationResults();
            addVerificationResult('üßπ Verification results cleared', 'info');
        }

        function updateCrawlerStats(data) {
            if (!data) return;
            
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards[0] && data.activeCrawls !== undefined) {
                statCards[0].querySelector('.stat-number').textContent = data.activeCrawls;
            }
            if (statCards[1] && data.totalTargets !== undefined) {
                statCards[1].querySelector('.stat-number').textContent = data.totalTargets;
            }
            if (statCards[2] && data.itemsProcessed !== undefined) {
                statCards[2].querySelector('.stat-number').textContent = data.itemsProcessed;
            }
        }

        function updateThreatDisplay(threatName, count) {
            const threatElements = document.querySelectorAll('.threat-count');
            threatElements.forEach(el => el.textContent = count);
            
            // Show critical threats
            if (threatName && threatName.toLowerCase().includes('critical')) {
                console.warn('üö® CRITICAL THREAT DETECTED:', threatName);
            }
        }

        // Enhanced startLogStreaming to show crawler activities
        const originalStartLogStreaming = startLogStreaming;
        startLogStreaming = function() {
            originalStartLogStreaming();
            
            // Update logs with crawler activities
            setTimeout(() => {
                updateLiveLogsDisplay();
                setInterval(updateLiveLogsDisplay, 1000);
            }, 500);
        };
    </script>
</body>
</html>
